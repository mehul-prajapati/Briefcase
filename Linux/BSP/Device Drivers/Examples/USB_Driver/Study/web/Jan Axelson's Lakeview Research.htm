<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"><!-- InstanceBegin template="/Templates/lvr.dwt" codeOutsideHTMLIsLocked="false" --><head>
<link rel="shortcut icon" href="http://www.lvr.com/favicon.ico">
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta name="Author" content="Jan Axelson">
<meta name="GENERATOR" content="">
<!-- InstanceBeginEditable name="doctitle" -->
<title>Jan Axelson's Lakeview Research</title>
<!-- InstanceEndEditable -->
<script src="Jan%20Axelson%27s%20Lakeview%20Research_files/SpryMenuBar.js" type="text/javascript"></script>
<link href="Jan%20Axelson%27s%20Lakeview%20Research_files/SpryMenuBarHorizontal.css" rel="stylesheet" type="text/css">
<link href="Jan%20Axelson%27s%20Lakeview%20Research_files/lvr.css" rel="stylesheet" type="text/css">
<!-- InstanceBeginEditable name="head" -->

<meta http-equiv="Description" content="Information and tools relating to design and programming FOR THE UNIVERSAL SERIAL BUS (USB)..">
<meta http-equiv="Keywords" content="USB, UNIVERSAL SERIAL BUS, HID, HUMAN INTERFACE DEVICE, CYPRESS SEMICONDUCTOR, CY763000, DIRECTX, DIRECT INPUT">
<meta name="Author" content="Jan Axelson">
<meta name="GENERATOR" content="">


<link rel="stylesheet" href="Jan%20Axelson%27s%20Lakeview%20Research_files/lvr.css" type="text/css">

<!-- InstanceEndEditable -->
<!-- InstanceBeginEditable name="fancyzoom" -->

<script src="Jan%20Axelson%27s%20Lakeview%20Research_files/FancyZoom.js" type="text/javascript"></script>
<script src="Jan%20Axelson%27s%20Lakeview%20Research_files/FancyZoomHTML.js" type="text/javascript"></script>

<!-- InstanceEndEditable -->

<!-- InstanceBeginEditable name="partnerlinks" -->
<script src="Jan%20Axelson%27s%20Lakeview%20Research_files/partnerlinks.js"></script>
<!-- InstanceEndEditable -->

</head>



<body onload="setupZoom()"><div style="position: absolute; left: 10px; top: 10px; visibility: hidden; z-index: 525;" id="ZoomSpin"><img src="Jan%20Axelson%27s%20Lakeview%20Research_files/zoom-spin-1.png" id="SpinImage"></div><div style="position: absolute; left: 10px; top: 10px; visibility: hidden; z-index: 499;" id="ZoomBox"><img style="display: block; width: 10px; height: 10px; cursor: pointer;" id="ZoomImage" src="Jan%20Axelson%27s%20Lakeview%20Research_files/spacer.gif" border="0"><div style="position: absolute; left: -15px; top: -15px; visibility: hidden;" id="ZoomClose"><img style="cursor: pointer;" src="Jan%20Axelson%27s%20Lakeview%20Research_files/closebox.png" width="30" height="30" border="0"></div></div><div style="position: absolute; visibility: hidden; margin-left: auto; margin-right: auto; z-index: 501;" id="ZoomCapDiv"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td align="right"><img style="display: block;" src="Jan%20Axelson%27s%20Lakeview%20Research_files/zoom-caption-l.png" width="13" height="26"></td><td style="font-size: 14px; font-family: Helvetica; font-weight: bold; color: rgb(255, 255, 255); text-shadow: 0px 2px 4px rgb(0, 0, 0); white-space: nowrap;" id="ZoomCaption" valign="middle" background="Jan%20Axelson%27s%20Lakeview%20Research_files/zoom-caption-fill.png"></td><td><img style="display: block;" src="Jan%20Axelson%27s%20Lakeview%20Research_files/zoom-caption-r.png" width="13" height="26"></td></tr></tbody></table></div><div style="position: absolute; left: 50px; top: 50px; width: 100px; height: 100px; visibility: hidden; z-index: 498;" id="ShadowBox"><table width="100%" height="100%" border="0" cellpadding="0" cellspacing="0"><tbody><tr style="height: 25px;"><td style="width: 27px;"><img style="display: block;" src="Jan%20Axelson%27s%20Lakeview%20Research_files/zoom-shadow1.png" width="27" height="25"></td><td background="Jan%20Axelson%27s%20Lakeview%20Research_files/zoom-shadow2.png"><img style="display: block;" src="Jan%20Axelson%27s%20Lakeview%20Research_files/spacer.gif" width="1" height="1"></td><td style="width: 27px;"><img style="display: block;" src="Jan%20Axelson%27s%20Lakeview%20Research_files/zoom-shadow3.png" width="27" height="25"></td></tr><tr><td background="Jan%20Axelson%27s%20Lakeview%20Research_files/zoom-shadow4.png"><img style="display: block;" src="Jan%20Axelson%27s%20Lakeview%20Research_files/spacer.gif" width="1" height="1"></td><td bgcolor="#ffffff"><img style="display: block;" src="Jan%20Axelson%27s%20Lakeview%20Research_files/spacer.gif" width="1" height="1"></td><td background="Jan%20Axelson%27s%20Lakeview%20Research_files/zoom-shadow5.png"><img style="display: block;" src="Jan%20Axelson%27s%20Lakeview%20Research_files/spacer.gif" width="1" height="1"></td></tr><tr style="height: 26px;"><td style="width: 27px;"><img style="display: block;" src="Jan%20Axelson%27s%20Lakeview%20Research_files/zoom-shadow6.png" width="27" height="26"></td><td background="Jan%20Axelson%27s%20Lakeview%20Research_files/zoom-shadow7.png"><img style="display: block;" src="Jan%20Axelson%27s%20Lakeview%20Research_files/spacer.gif" width="1" height="1"></td><td style="width: 27px;"><img style="display: block;" src="Jan%20Axelson%27s%20Lakeview%20Research_files/zoom-shadow8.png" width="27" height="26"></td></tr></tbody></table></div>


<div id="container_all">

<div id="container_header">

<div id="title">

<a href="http://www.lvr.com/index.html"><img src="Jan%20Axelson%27s%20Lakeview%20Research_files/lvr_logo.jpg" alt="Jan Axelson's Lakeview Research" vspace="0" width="346" height="64" hspace="1" border="0"></a>

</div> <!-- title -->

<div id="search">

<form class="float_right" method="get" action="http://www.google.com/search">

<!--<div style="border:none;padding:4px; float:right;">-->
<table border="0" cellpadding="5">
<tbody><tr align="right">

<td>
<input name="q" size="30" maxlength="127" type="text">
<input value="Google Search" type="submit">
</td>
</tr>
 
<tr style="font-size:90%" align="right">
<td>
<input name="sitesearch" value="Lvr.com" checked="checked" type="checkbox"> 
 search this site only
 </td>
</tr>
</tbody></table>
</form>  

</div> <!-- search -->

<div id="menubar_utilities">

<ul id="MenuBar1" class="MenuBarHorizontal">
  <li><a href="http://www.lvr.com/index.html">Home</a></li>
   <li><a tabindex="-1" href="http://www.lvr.com/quicklinks.htm">Site Map</a></li>
   <li><a tabindex="-1" href="http://www.lvr.com/ordering.htm">Buy Books</a> </li>
  <li class="last"><a tabindex="-1" href="http://www.lvr.com/about_lakeview_research.htm">About Lakeview Research</a> </li>
</ul>

</div> <!-- menubar_utilities -->

<div id="menubar_main">
         
<ul id="MenuBar3" class="MenuBarHorizontal">
  <li class="background"><a class="MenuBarItemSubmenu" href="http://www.lvr.com/usb.htm">USB&nbsp; </a>
    <ul>
      <li class="background"><a tabindex="-1" href="http://www.lvr.com/usb.htm">USB Main Page</a></li>
               
      <li class="background"><a tabindex="-1" href="http://www.lvr.com/usbchips.htm">Chips</a></li>      
      <li><a tabindex="-1" href="http://www.lvr.com/development_tools.htm">Development Tools</a></li>
      <li><a tabindex="-1" href="http://www.lvr.com/usbcode.htm">Device Code</a></li>
      <li><a tabindex="-1" href="http://www.lvr.com/usb_device_hardware.htm">Device Hardware</a></li>
      <li><a tabindex="-1" href="http://www.lvr.com/embedded_host.htm">Embedded Host &amp; OTG</a></li>
      <li><a tabindex="-1" href="http://www.lvr.com/usb_host_software.htm">Host Software</a></li>
      <li><a tabindex="-1" href="http://www.lvr.com/hidpage.htm">Human Interface Devices</a></li>
      <li><a tabindex="-1" href="http://www.lvr.com/mass_storage.htm">Mass Storage</a></li>
      <li><a tabindex="-1" href="http://www.lvr.com/winusb.htm">WinUSB</a></li>           
    </ul>
  </li>
  
  <li><a tabindex="-1" href="http://www.lvr.com/serport.htm">Serial Ports</a> </li>
   <li><a tabindex="-1" href="http://www.lvr.com/mass_storage.htm">Mass Storage</a></li>
   <li><a tabindex="-1" href="http://www.lvr.com/ethernet.htm">Ethernet</a></li>
   <li><a tabindex="-1" href="http://www.lvr.com/parport.htm">Parallel Port</a></li>
   <li><a tabindex="-1" href="http://www.lvr.com/forum/index.php">PORTS Forum</a></li>
   <li class="last"><a class="MenuBarItemSubmenu" tabindex="-1" href="http://www.lvr.com/sitemap.htm">More&nbsp; </a>
     <ul>
       <li><a tabindex="-1" href="http://www.lvr.com/microc.htm">8052-Basic</a></li>
       <li><a tabindex="-1" href="http://www.lvr.com/pcbs.htm">Printed Circuit Boards</a></li>
       <li><a tabindex="-1" href="http://www.lvr.com/articles.htm">Articles</a></li>
       <li><a tabindex="-1" href="http://www.lvr.com/press.htm">News Releases</a></li>
      
     </ul>
 
</li></ul>


</div> <!-- menubar_main -->

</div> <!-- header -->



<div id="container_main">
  <div id="content">
<!-- InstanceBeginEditable name="Content" -->



<p><a href="http://www.lvr.com/index.html">Home</a> &gt; <a href="http://www.lvr.com/usb.htm">USB Central</a> &gt; <a href="http://www.lvr.com/hidpage.htm">HID Page</a> &gt;  HID FAQ</p>

<h1> HID  FAQ</h1>
<p>Questions relating to designing and programming  USB devices in the human interface class.</p>
<h4>Also see:</h4>
<p><a href="http://www.lvr.com/hidpage.htm">HID Page</a></p>
<h2>Sending and Receiving Reports under Windows</h2>
<blockquote>
  <p align="left"><strong>How can an application request a report using a 
    control transfer? </strong></p>
  <p align="left">HidD_GetFeature requests a Feature report using a control 
    transfer with a Get_Report request. Beginning with Windows XP, you can 
    use HidD_GetInputReport to request an Input report with a control transfer 
    and a Get_Report request.</p>
  <p align="left"><strong>How can an application send a report using a control 
    transfer?</strong> </p>
  <p align="left">Under Windows 98 Gold (original version), WriteFile sends 
    Output reports using control transfers with Set_Report requests. Under 
    later Windows editions, WriteFile uses control transfers if the HID interface 
    doesn't have an interrupt OUT endpoint. Otherwise, WriteFile uses interrupt 
    transfers for Output reports. Beginning with Windows XP, you can use HidD_SetOutputReport 
    to send an Output report with a control transfer and a Set_Report request. 
    Under all Windows editions, HidD_SetFeature sends a Feature report using 
    a control transfer with a Set_Report request. </p>
  <p align="left"><strong>How can an application request reports using interrupt 
    transfers?</strong></p>
  <p align="left"> Use ReadFile or ReadFileEx. The first byte in the buffer 
    is the Report ID</p>
  <p align="left"><strong>How can an application send reports using an interrupt 
    transfers?</strong></p>
  <p align="left"> Use WriteFile or WriteFileEx. The Windows edition must be later than Windows 
    98 Gold (original version), the device's USB version and HID interface 
    must be version 1.1 or later, and the HID interface must have an interrupt 
    OUT endpoint. The first byte in the buffer is the Report ID.</p>
  <p align="left"><strong>How large is the ReadFile buffer?</strong></p>
  <p align="left">Under Windows 98 Gold, 2 reports. Under Windows 98 SE, Windows 
    2000 and Windows Me, the default is 8 reports. Under Windows XP, the default 
    is 32 reports. Under all but Windows 98 Gold, you can change the defaults 
    with HidD_SetNumInputBuffers. The maximum size under Windows XP and later 
    is 512. The maximum size under Windows 2000 is 200. Use HidD_GetNumInputBuffers 
    to read the buffer size.</p>
  <p align="left"><strong>Where is the Windows documentation for accessing 
    HIDs?</strong></p>
  <p align="left">MSDN <a href="http://msdn.microsoft.com/en-us/library/aa973512.aspx">HID documentation</a>. </p>
  <p align="left"><strong>Do I need the WDK to create applications 
    that access HIDs?</strong></p>
  <p align="left">C programmers will need the files hid.h and hidsdi.h from   the <a href="http://www.lvr.com/usb_host_software.htm#writing_drivers">WDK</a>. My <a href="http://www.lvr.com/hidpage.htm#MyExampleCode"> example applications for .NET</a> include 
    declarations for many of the HID API functions and don't require additional header files. </p>
  <p align="left"><strong>Does every HID require an interrupt IN endpoint 
    and an Input report?</strong></p>
  <p align="left">The HID specification says that every HID must have an interrupt 
    IN endpoint, which suggests that the HID should have an Input report.</p>
  <p align="left"><strong>Why do I receive "Access denied" when 
    attempting to access my HID?</strong></p>
  <p align="left">Windows 2000 and later have exclusive read/write access 
    to HIDs that are configured as a system keyboards or mice. An application 
    can obtain a handle to a system keyboard or mouse by not requesting READ 
    or WRITE access with CreateFile. Applications  can then use HidD_SetFeature 
    and HidD_GetFeature (if  the device supports Feature reports).</p>
  <p align="left"><strong>How can applications receive Input reports from 
    a system mouse or keyboard?</strong></p>
  <p align="left"> The Windows  <a href="http://msdn.microsoft.com/en-us/library/ms645536%28VS.85%29.aspx">raw input</a> API  enables applications to read 
    Input reports when communicating with system mice and keyboards. </p>
  <p align="left"><strong>On a system with multiple keyboards, mice, or joysticks 
    how can my application determine which device is sending data?</strong></p>
  <p align="left">Use raw input (see previous question).</p>
</blockquote>
      <h2 align="left">Debugging</h2>
      <blockquote>
        <p><strong>How  can I transfer data faster?</strong></p>
        <p> On  the interrupt endpoint(s), set bInterval to the minimum 
allowed value: 10 for  low speed and 1 for full or high speed. Each call
 to ReadFile or WriteFile adds overhead, so send the data in fewer, 
longer reports and/or increase  the ReadFile buffer size to enable 
reading multiple reports at once. (ReadFile returns as many reports as 
are available, up to 
        ReadFile's buffer size.)</p>
<p align="left"><strong>How can I keep my application from losing reports?</strong></p>
        <p align="left">If the ReadFile buffer is full, on receiving a new report, 
          the driver drops the oldest report. To prevent losing reports, use 
          HidD_SetNumInputBuffers to increase the buffer size, use longer reports sent less frequently, have the application 
          read reports more often, or increase the size of the buffer in the call 
          to ReadFile. (ReadFile returns as many reports as are available, up to 
          ReadFile's buffer size.)</p>
        <p align="left"><strong>Why does ReadFile hang my application when I request 
          to read a report?</strong></p>
        <p align="left">ReadFile returns when one of more reports of the expected 
          size are available or on a timeout if implemented. </p>
        <p align="left"><strong>How can I find out if a report is available without 
          hanging my application?</strong></p>
        <p align="left">Use overlapped ReadFile with a short timeout or use ReadFileEx 
          to signal when a report is available. In .NET, you can do asynchronous 
          ReadFile calls with a delegate and BeginInvoke and EndInvoke methods.</p>
        <p align="left"><strong>Why do I receive "CRC Error" when attempting 
          to send a report to my device?</strong></p>
        <p align="left">This error can be caused by any of a number of firmware 
          errors that results in the host's not seeing a valid response after sending 
          a report.</p>
        <p align="left"><strong>How do Windows and Mac OS X handle multiple applications 
          accessing the same HID?</strong></p>
        <p align="left">Every open handle to the HID has its own report queue. Every 
          report a device sends goes into all of the queues so multiple applications 
          can read the same report.</p>
      </blockquote>
      <!-- InstanceEndEditable -->
  </div> <!-- content -->
  
  <div id="rightside"><!-- #BeginLibraryItem "/Library/sponsored.lbi" --> <link rel="stylesheet" href="Jan%20Axelson%27s%20Lakeview%20Research_files/lvr.css" type="text/css">
<p><strong>Partner Links</strong></p>


<script language="JavaScript" type="text/javascript">
partnerlinks(); 
</script><p><strong><a href="http://www.sysnucleus.com/">USBTrace - USB Analyzer</a></strong><br>  Software-based USB Protocol Analyzer. Easy-to-use and affordable.<br><a href="http://www.sysnucleus.com/">www.sysnucleus.com</a></p><p><strong><a href="http://www.totalphase.com/solutions/apps/usb_analyzer_guide/?tclid=8DD6902647060BC8">Powerful USB Analyzer</a></strong><br>  Real-time USB 2.0 display &amp; class decoding. See a video demo now. <br><a href="http://www.totalphase.com/solutions/apps/usb_analyzer_guide/?tclid=8DD6902647060BC8">www.totalphase.com</a></p><p><a href="http://www.eltima.com/products/usb-over-ethernet/"><strong>USB to Ethernet Connector</strong></a><br>  Share &amp; access USB devices over local network or even Internet!<br>  <a href="http://www.eltima.com/products/usb-over-ethernet/">www.eltima.com</a></p><p><a href="http://www.mcci.com/"><strong>Tools, Drivers, Firmware</strong></a><br>  The broadest range of products and services for the USB developer.<br>  <a href="http://www.mcci.com/">mcci.com</a></p><p><strong><a href="http://www.hcc-embedded.com/"> High Quality Embedded USB</a></strong><br> Most Device/Host controllers supported. Broad range of class drivers.<br><a href="http://www.hcc-embedded.com/"> www.HCC-Embedded.com</a></p><p><strong><a href="http://www.hcc-embedded.com/"> Networking Over USB </a></strong><br> RNDIS, CDC-ECM/EEM/NCM/ACM. Pre-configured projects available.<br><a href="http://www.hcc-embedded.com/"> www.HCC-Embedded.com</a></p><p><strong><a href="http://www.absolute-software.co.uk/">Embedded Programming</a></strong><br>Experts in embedded software development. Microchip Certified Consults.<br><a href="http://www.absolute-software.co.uk/">absolute-software.co.uk</a></p><p><strong><a href="http://www.ellisys.com/">USB Protocol Analyzers</a></strong><br>ELLISYS protocol analyzers, generators, automated compliance solutions.<br><a href="http://www.ellisys.com/">www.ellisys.com</a></p>



<p></p><center>***</center>  <p></p>
  <script language="javascript">
  <!--
  var contact = "Ask about advertising on this site"
  var email = "jan"
  var emailHost = "Lvr.com" 
  document.write("<a href=" + "mail" + "to:" + email + "@" + emailHost+ ">" + contact + "</a>")
  //-->
  </script><a href="mailto:jan@Lvr.com">Ask about advertising on this site</a>  
<p></p>
<!-- #EndLibraryItem --><!-- #BeginLibraryItem "/Library/google.lbi" -->
<p>
<script type="text/javascript"><!--
google_ad_client = "pub-9614272375919933";
google_ad_width = 120;
google_ad_height = 600;
google_ad_format = "120x600_as";
google_color_border = "000000";
google_color_bg = "F0F0F0";
google_color_link = "0000FF";
google_color_url = "008000";
google_color_text = "000000";
//--></script>

<script type="text/javascript" src="Jan%20Axelson%27s%20Lakeview%20Research_files/show_ads.js">
</script><ins style="display:inline-table;border:none;height:600px;margin:0;padding:0;position:relative;visibility:visible;width:120px;background-color:transparent"><ins id="aswift_0_anchor" style="display:block;border:none;height:600px;margin:0;padding:0;position:relative;visibility:visible;width:120px;background-color:transparent"><iframe marginwidth="0" marginheight="0" vspace="0" hspace="0" allowtransparency="true" onload="var i=this.id,s=window.google_iframe_oncopy,H=s&amp;&amp;s.handlers,h=H&amp;&amp;H[i],w=this.contentWindow,d;try{d=w.document}catch(e){}if(h&amp;&amp;d&amp;&amp;(!d.body||!d.body.firstChild)){if(h.call){setTimeout(h,0)}else if(h.match){try{h=s.upd(h,i)}catch(e){}w.location.replace(h)}}" id="aswift_0" name="aswift_0" style="left:0;position:absolute;top:0;" scrolling="no" width="120" frameborder="0" height="600"></iframe></ins></ins>
</p>


<p>
<script type="text/javascript"><!--
google_ad_client = "pub-9614272375919933";
google_ad_width = 120;
google_ad_height = 600;
google_ad_format = "120x600_as";
google_color_border = "000000";
google_color_bg = "F0F0F0";
google_color_link = "0000FF";
google_color_url = "008000";
google_color_text = "000000";
//--></script>

<script type="text/javascript" src="Jan%20Axelson%27s%20Lakeview%20Research_files/show_ads.js">
</script><ins style="display:inline-table;border:none;height:600px;margin:0;padding:0;position:relative;visibility:visible;width:120px;background-color:transparent"><ins id="aswift_1_anchor" style="display:block;border:none;height:600px;margin:0;padding:0;position:relative;visibility:visible;width:120px;background-color:transparent"><iframe marginwidth="0" marginheight="0" vspace="0" hspace="0" allowtransparency="true" onload="var i=this.id,s=window.google_iframe_oncopy,H=s&amp;&amp;s.handlers,h=H&amp;&amp;H[i],w=this.contentWindow,d;try{d=w.document}catch(e){}if(h&amp;&amp;d&amp;&amp;(!d.body||!d.body.firstChild)){if(h.call){setTimeout(h,0)}else if(h.match){try{h=s.upd(h,i)}catch(e){}w.location.replace(h)}}" id="aswift_1" name="aswift_1" style="left:0;position:absolute;top:0;" scrolling="no" width="120" frameborder="0" height="600"></iframe></ins></ins>
</p><!-- #EndLibraryItem --></div>
  <!-- rightside -->
</div>
<!-- container_main -->
</div> 
<!-- container_all -->


<script type="text/javascript">
<!--
var MenuBar1 = new Spry.Widget.MenuBar("MenuBar1", {imgDown:"SpryAssets/SpryMenuBarDownHover.gif", imgRight:"SpryAssets/SpryMenuBarRightHover.gif"});
var MenuBar3 = new Spry.Widget.MenuBar("MenuBar3", {imgDown:"SpryAssets/SpryMenuBarDownHover.gif", imgRight:"SpryAssets/SpryMenuBarRightHover.gif"});
//-->
</script>



</body><!-- InstanceEnd --></html>