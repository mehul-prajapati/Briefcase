<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html><head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta name="robots" content="index,nofollow">

<title>Samba/SambaServerGuide - Community Help Wiki</title>
<script type="text/javascript" src="Samba_SambaServerGuide%20-%20Community%20Help%20Wiki_files/common.js"></script>

<script type="text/javascript">
<!--
var search_hint = "Search";
//-->
</script>


<link rel="stylesheet" type="text/css" charset="utf-8" media="all" href="Samba_SambaServerGuide%20-%20Community%20Help%20Wiki_files/common.css">
<link rel="stylesheet" type="text/css" charset="utf-8" media="screen" href="Samba_SambaServerGuide%20-%20Community%20Help%20Wiki_files/screen.css">
<link rel="stylesheet" type="text/css" charset="utf-8" media="print" href="Samba_SambaServerGuide%20-%20Community%20Help%20Wiki_files/print.css">
<link rel="stylesheet" type="text/css" charset="utf-8" media="projection" href="Samba_SambaServerGuide%20-%20Community%20Help%20Wiki_files/projection.css">

<!-- css only for MS IE6/IE7 browsers -->
<!--[if lt IE 8]>
   <link rel="stylesheet" type="text/css" charset="utf-8" media="all" href="/moin_static192/light/css/msie.css">
<![endif]-->





<link rel="Start" href="https://help.ubuntu.com/community/CommunityHelpWiki">
<link rel="Alternate" title="Wiki Markup" href="https://help.ubuntu.com/community/Samba/SambaServerGuide?action=raw">
<link rel="Alternate" media="print" title="Print View" href="https://help.ubuntu.com/community/Samba/SambaServerGuide?action=print">
<link rel="Up" href="https://help.ubuntu.com/community/Samba">
<link rel="Search" href="https://help.ubuntu.com/community/FindPage">
<link rel="Index" href="https://help.ubuntu.com/community/TitleIndex">
<link rel="Glossary" href="https://help.ubuntu.com/community/WordIndex">
<link rel="Help" href="https://help.ubuntu.com/community/HelpOnFormatting">
</head>

<body dir="ltr" lang="en">


    <div id="leftbanner">
    </div>
    <div id="rightbanner">
    </div>
    <div id="container">
        <div id="container-inner">
	    <div id="mothership">
		<ul>
	            <li><a href="http://www.ubuntu.com/partners">Partners</a> </li>
        	    <li><a href="http://www.ubuntu.com/support">Support</a></li>
        	    <li><a href="http://www.ubuntu.com/community">Community</a></li>
        	    <li><a href="http://www.ubuntu.com/">Ubuntu.com</a></li>
	        </ul>
	    </div>
            <div id="header">
                <h1 id="ubuntu-header"><a href="https://help.ubuntu.com/">Ubuntu Documentation</a></h1>
                <ul id="main-menu">
                    <li><a href="https://help.ubuntu.com/">Official Documentation</a></li>
                    <li><a class="main-menu-item current" href="https://help.ubuntu.com/community">Community Help Wiki</a></li>
                </ul>
            </div>
            <div id="menu-search">
                <div id="subheader"> 
                    <div class="subheader-menu"> 
                        <div id="second-nav">
<ul id="username"><li><a href="https://help.ubuntu.com/community/Samba/SambaServerGuide?action=login&amp;login=1" id="login" rel="nofollow">Login to edit</a></li></ul>
 </div> 
    <div id="user-info"> 
    </div>
 

                            
                        </div> 
                    </div> 


                    <div id="search-box">

<noscript>
 <form action="http://www.google.com/cse" id="cse-search-box">
   <div>
     <input type="hidden" name="cx" value="004599128559784038176:vj_p0xo-nng" />
     <input type="hidden" name="ie" value="UTF-8" />
     <input type="text" name="q" size="21" />
     <input type="submit" name="sa" value="Search" />
   </div>
 </form>
</noscript>

<script>
 document.write('<form action="https://help.ubuntu.com/search.html" id="cse-search-box">');
 document.write('  <div>');
 document.write('    <input type="hidden" name="cof" value="FORID:9" />');
 document.write('    <input type="hidden" name="cx" value="004599128559784038176:vj_p0xo-nng" />');
 document.write('    <input type="hidden" name="ie" value="UTF-8" />');
 document.write('    <input type="text" name="q" size="21" />');
 document.write('    <input type="submit" name="sa" value="Search" />');
 document.write('  </div>');
 document.write('</form>');
</script><form action="https://help.ubuntu.com/search.html" id="cse-search-box">  <div>    <input name="cof" value="FORID:9" type="hidden">    <input name="cx" value="004599128559784038176:vj_p0xo-nng" type="hidden">    <input name="ie" value="UTF-8" type="hidden">    <input name="q" size="21" type="text">    <input name="sa" value="Search" type="submit">  </div></form>


                    </div>
                </div>
                <div id="title"><h1>
<span id="pagelocation"><span class="pagepath"><a href="https://help.ubuntu.com/community/Samba">Samba</a></span><span class="sep">/</span><a class="backlink" href="https://help.ubuntu.com/community/Samba/SambaServerGuide?action=fullsearch&amp;value=linkto%3A%22Samba%2FSambaServerGuide%22&amp;context=180" rel="nofollow" title="Click to do a full-text search for this title">SambaServerGuide</a></span>
</h1>
                </div>
            <div id="cwt-nav3">

 <hr class="clear">
            </div>
                <div id="cwt-content" class="clearfix content-area">

<div id="page" dir="ltr" lang="en">
<div dir="ltr" id="content" lang="en"><span class="anchor" id="top"></span>
<span class="anchor" id="line-1"></span><span class="anchor" id="line-2"></span><span class="anchor" id="line-3"></span><div><table style="float:right;  font-size: 0.9em;  width:40%;  background:#FFEFD5;  margin: 0 0 1em 1em;"><tbody><tr>  <td style="padding:0.5em;"><p class="line891"></p><div class="table-of-contents"><p class="table-of-contents-heading">Contents</p><ol><li>
<a href="#Samba_Server_Configuration_-_Simple">Samba Server Configuration - Simple</a><ol><li>
<a href="#Ubuntu_Server">Ubuntu Server</a></li><li>
<a href="#Windows_XP_Server">Windows XP Server</a></li></ol></li><li>
<a href="#Samba_Server_Configuration_by_GUI">Samba Server Configuration by GUI</a></li><li>
<a href="#Samba_Server_Configuration_in_terminal">Samba Server Configuration in terminal</a><ol><li>
<a href="#Global_Settings">Global Settings</a></li><li>
<a href="#File_Sharing_.28Basics.29">File Sharing (Basics)</a></li><li>
<a href="#File_Sharing_.28Advanced.29">File Sharing (Advanced)</a></li></ol></li></ol></div></td>
</tr>
</tbody></table></div><span class="anchor" id="line-4"></span><span class="anchor" id="line-5"></span><p class="line867">
</p><h1 id="Samba_Server_Configuration_-_Simple">Samba Server Configuration - Simple</h1>
<span class="anchor" id="line-6"></span><span class="anchor" id="line-7"></span><p class="line867"><strong>Note:</strong> There is another Network Share via Samba Tutorial at the following community wiki page: <a class="https" href="https://help.ubuntu.com/community/How%20to%20Create%20a%20Network%20Share%20Via%20Samba%20Via%20CLI%20%28Command-line%20interface/Linux%20Terminal%29%20-%20Uncomplicated,%20Simple%20and%20Brief%20Way%21">How to Create a Network Share Via Samba Via CLI (Command-line interface/Linux Terminal) - A Differing Procedure</a> <span class="anchor" id="line-8"></span>The tutorial focuses on using the CLI and it's procedure differs from the procedure documented in this wiki page.  <span class="anchor" id="line-9"></span><span class="anchor" id="line-10"></span></p><p class="line867"><strong>Note:</strong>
 For Ubuntu 8.04 (Hardy) and later, shared directories are created 
directly from the directory. Browse to the location of the directory you
 would like to share, right-click the directory, and choose <strong>Sharing Options</strong>.  Click the "<strong>Share this folder</strong>". <span class="anchor" id="line-11"></span><span class="anchor" id="line-12"></span></p><p class="line862">The shares are defined in the background using the "<em>net usershare</em>" command and the definitions are saved in /var/lib/samba/usershares/ . Therefore, shares defined with this method are <strong>not</strong> visible in smb.conf. <span class="anchor" id="line-13"></span><span class="anchor" id="line-14"></span></p><p class="line874">This
 section should allow you to "quick start" SMB shares between Ubuntu and
 either Ubuntu or Windows servers. The gui method is easier to work 
with, because: <span class="anchor" id="line-15"></span><span class="anchor" id="line-16"></span></p><ol type="1"><li>Shares are Public (browsable in Network Places) <span class="anchor" id="line-17"></span></li><li>A password is not set for shares (they can be mounted by anyone). <span class="anchor" id="line-18"></span><span class="anchor" id="line-19"></span></li></ol><p class="line874">However, remember that this is less secure. <span class="anchor" id="line-20"></span><span class="anchor" id="line-21"></span></p><p class="line862">Be warned you are installing a service (server) and you may wish to install a <a href="https://help.ubuntu.com/community/Firewall">Firewall</a>
 management utility to help prevent undesired access. See also the 
manual configuration sections below to learn how to "hide" your shares 
from browsing and set a password for access. <span class="anchor" id="line-22"></span><span class="anchor" id="line-23"></span></p><p class="line867">
</p><h2 id="Ubuntu_Server">Ubuntu Server</h2>
<span class="anchor" id="line-24"></span><span class="anchor" id="line-25"></span><p class="line874">This section enables Ubuntu as a samba file server. <span class="anchor" id="line-26"></span><span class="anchor" id="line-27"></span></p><p class="line867">
</p><h3 id="Sharing_a_directory">Sharing a directory</h3>
<span class="anchor" id="line-28"></span><span class="anchor" id="line-29"></span><p class="line862">To
 share a directory you must have permission to access the directory. Go 
to your home directory ( Places -&gt; Home directory). Right click on 
the "Documents" directory and in the pop up menu select "Share Folder". <span class="anchor" id="line-30"></span><span class="anchor" id="line-31"></span></p><p class="line862">If
 samba is not installed you will get a pop up menu "Sharing services are
 not installed". Select "Install Windows networks support (SMB)" and 
deselect "Install Unix networks support (NFS)" -&gt; then click "Install
 services". <span class="anchor" id="line-32"></span><span class="anchor" id="line-33"></span></p><p class="line874">If you get an error message that the samba .deb could not be found, open a terminal and update apt-get. <span class="anchor" id="line-34"></span><span class="anchor" id="line-35"></span></p><p class="line867"><span class="anchor" id="line-36"></span><span class="anchor" id="line-37"></span></p><pre><span class="anchor" id="line-1"></span>sudo apt-get update</pre><span class="anchor" id="line-38"></span><span class="anchor" id="line-39"></span><p class="line874">Try
 again and Ubuntu will download and install samba.  Right click on the 
"Documents" directory and in the pop up menu select "Share Folder". You 
will get a pop up menu "Share Folder". Select "Windows networks (SMB)" 
in the pull down menu and give your share a name in the "Name" box. 
Unselect the "Read only" check box if you want read/write access to the 
share. Click the "Share" button. <span class="anchor" id="line-40"></span><span class="anchor" id="line-41"></span><span class="anchor" id="line-42"></span></p><p class="line867">
</p><h2 id="Windows_XP_Server">Windows XP Server</h2>
<span class="anchor" id="line-43"></span><span class="anchor" id="line-44"></span><p class="line874">This section enables Windows XP as a samba file server. <span class="anchor" id="line-45"></span><span class="anchor" id="line-46"></span></p><p class="line867">
</p><h3 id="Sharing_a_directory-1">Sharing a directory</h3>
<span class="anchor" id="line-47"></span><span class="anchor" id="line-48"></span><p class="line862">1.
 On the Windows server, browse in explorer ("My Computer") to the 
location of the directory you wish to share (C:\Documents and Settings 
for example). Next right click on the directory to share and select 
"Sharing and Security...". In the pop-up dialog box click the "Sharing" 
tab. Click the "<span class="u">Network Setup Wizard</span>" to configure your network to allow shares. Work your way through the wizard. Note the default workgroup is <strong>MSHOME</strong>.
 You may change this value if you like but all your computers should be 
in the same workgroup. Eventually you will be given the option to "Turn 
on file and printer sharing". This is the option you want, continue with
 the network wizard. You will have to restart your computer for the 
settings to take effect -&gt; Restart Windows. <span class="anchor" id="line-49"></span><span class="anchor" id="line-50"></span></p><p class="line874">2.
 After rebooting, again open explorer ("My Computer") and navigate to 
the directory you wish to share. Again right click on the directory and 
select "Sharing and Security...". In the pop-up dialog box click the 
"Sharing" tab. In the "Network sharing and security" box, tic (select 
with the mouse) the "Share this folder on the network" box. Give the 
directory a share name. This will give read only access to Ubuntu 
computers via samba. To allow read/write access tic (select with the 
mouse) the "Allow network users to change my files" box. Click the 
"Apply" button and close the dialog box. <span class="anchor" id="line-51"></span><span class="anchor" id="line-52"></span><span class="anchor" id="line-53"></span><span class="anchor" id="line-54"></span></p><p class="line867">
</p><h1 id="Samba_Server_Configuration_by_GUI">Samba Server Configuration by GUI</h1>
<span class="anchor" id="line-55"></span><span class="anchor" id="line-56"></span><p class="line874">There are a few graphical tools available that offer more flexibility than the "Sharing Options" in the Nautilus context menu. <span class="anchor" id="line-57"></span><span class="anchor" id="line-58"></span></p><p class="line862">A
 fairly comprehensive graphical Samba configuration tool is available 
for KDE, by installing the "kdenetwork-filesharing" package. After 
install, you can find it by launching the KDE Control Center. (<strong>Alt-F2</strong> and then type <strong>kcontrol</strong>). Browse to <strong>Internet &amp; Network</strong> &gt; <strong>Samba</strong>. <span class="anchor" id="line-59"></span><span class="anchor" id="line-60"></span></p><p class="line862">For Gnome, the package <strong>system-config-samba</strong> is convenient. Once installed, launch <strong>System - Administration - Samba</strong>. (Shares created using the "Sharing options" context menu will not be visible in this tool.) <span class="anchor" id="line-61"></span><span class="anchor" id="line-62"></span></p><p class="line862">A less friendly but also graphical tool is <a href="https://help.ubuntu.com/community/Swat">Swat</a>, a web-based interface. <span class="anchor" id="line-63"></span><span class="anchor" id="line-64"></span></p><p class="line867">
</p><h1 id="Samba_Server_Configuration_in_terminal">Samba Server Configuration in terminal</h1>
<span class="anchor" id="line-65"></span><span class="anchor" id="line-66"></span><p class="line862">Configuration is performed by reading and editing <strong>/etc/samba/smb.conf</strong>, the configuration file for the samba server. <span class="anchor" id="line-67"></span><span class="anchor" id="line-68"></span></p><p class="line874">The following tips show how to do some basic things without installing additional software, using <span class="anchor" id="line-69"></span>the command line. It is not difficult, just be careful with typos. <span class="anchor" id="line-70"></span><span class="anchor" id="line-71"></span></p><p class="line862">First open a terminal: <strong>Applications</strong> &gt; <strong>System Tools</strong> &gt; <strong>Terminal</strong> and open the file smb.conf <span class="anchor" id="line-72"></span><span class="anchor" id="line-73"></span></p><p class="line867"><span class="anchor" id="line-74"></span><span class="anchor" id="line-75"></span></p><pre><span class="anchor" id="line-1-1"></span>sudo nano -w /etc/samba/smb.conf</pre><span class="anchor" id="line-76"></span><p class="line867"><strong>How to Save:</strong> To save in nano use "CTRL-O", then "CTRL-X". <span class="anchor" id="line-77"></span><span class="anchor" id="line-78"></span></p><p class="line867"><strong>Tip:</strong> Replacing <strong>sudo nano</strong> with <strong>gksudo gedit</strong> gives you a nice graphical editor. <span class="anchor" id="line-79"></span><span class="anchor" id="line-80"></span></p><p class="line874">The file *smb.conf* is divided in several sections: <span class="anchor" id="line-81"></span><span class="anchor" id="line-82"></span></p><p class="line867"><span class="anchor" id="line-83"></span><span class="anchor" id="line-84"></span><span class="anchor" id="line-85"></span><span class="anchor" id="line-86"></span><span class="anchor" id="line-87"></span><span class="anchor" id="line-88"></span><span class="anchor" id="line-89"></span><span class="anchor" id="line-90"></span></p><pre><span class="anchor" id="line-1-2"></span>Global Settings
<span class="anchor" id="line-2"></span>Debugging/Accounting
<span class="anchor" id="line-3"></span>Authentication
<span class="anchor" id="line-4"></span>Printing
<span class="anchor" id="line-5"></span>File sharing
<span class="anchor" id="line-6"></span>Misc
<span class="anchor" id="line-7"></span>Share Definitions</pre><span class="anchor" id="line-91"></span><span class="anchor" id="line-92"></span><p class="line867"><strong>Comments may start with either a # or a ;</strong> <span class="anchor" id="line-93"></span><span class="anchor" id="line-94"></span></p><p class="line867">
</p><h2 id="Global_Settings">Global Settings</h2>
<span class="anchor" id="line-95"></span><span class="anchor" id="line-96"></span><p class="line862">Let's start with <strong>Global Settings</strong>.
 Here you will see several lines, which you can also see in the 
graphical networktool like workgroup and wins server. If you changed 
everything to your liking already then you can skip this section, if not
 change to what you need. <span class="anchor" id="line-97"></span>If you do not know what items mean, leave them be and read the  <a class="http" href="http://www.samba.org/samba/docs/using_samba/ch06.html">relevant part in the real Samba-howto</a> instead of randomly changing them. It will save you trouble-shooting later. <span class="anchor" id="line-98"></span><span class="anchor" id="line-99"></span></p><p class="line867">
</p><h2 id="File_Sharing_.28Basics.29">File Sharing (Basics)</h2>
<span class="anchor" id="line-100"></span><span class="anchor" id="line-101"></span><p class="line862">The important part for us is <strong>File sharing</strong>.
  Samba shares are named in brackets, [ ], and configured by adding 
options in the lines that follow. Most options are boolean (yes / no). <span class="anchor" id="line-102"></span><span class="anchor" id="line-103"></span></p><p class="line874">We need to change: <span class="anchor" id="line-104"></span><span class="anchor" id="line-105"></span></p><p class="line867"><span class="anchor" id="line-106"></span><span class="anchor" id="line-107"></span><span class="anchor" id="line-108"></span><span class="anchor" id="line-109"></span><span class="anchor" id="line-110"></span><span class="anchor" id="line-111"></span><span class="anchor" id="line-112"></span><span class="anchor" id="line-113"></span></p><pre><span class="anchor" id="line-1-3"></span>[homes]
<span class="anchor" id="line-2-1"></span>comment = Home Directories
<span class="anchor" id="line-3-1"></span>browseable = no
<span class="anchor" id="line-4-1"></span>
<span class="anchor" id="line-5-1"></span># By default, the home directories are exported read-only. Change next
<span class="anchor" id="line-6-1"></span># parameter to 'yes' if you want to be able to write to them.
<span class="anchor" id="line-7-1"></span>  writable = no</pre><span class="anchor" id="line-114"></span><p class="line874">This
 describes your /home directory. Usually you want to share this 
directory in a home environment, because these are the files you want to
 share. To do so, make the following changes: <span class="anchor" id="line-115"></span><span class="anchor" id="line-116"></span></p><p class="line867"><span class="anchor" id="line-117"></span><span class="anchor" id="line-118"></span><span class="anchor" id="line-119"></span><span class="anchor" id="line-120"></span><span class="anchor" id="line-121"></span><span class="anchor" id="line-122"></span><span class="anchor" id="line-123"></span><span class="anchor" id="line-124"></span></p><pre><span class="anchor" id="line-1-4"></span>[homes]
<span class="anchor" id="line-2-2"></span>comment = Home Directories
<span class="anchor" id="line-3-2"></span>browseable = yes
<span class="anchor" id="line-4-2"></span>
<span class="anchor" id="line-5-2"></span># By default, the home directories are exported read-only. Change the
<span class="anchor" id="line-6-2"></span># next parameter to 'no' if you want to be able to write to them.
<span class="anchor" id="line-7-2"></span>   read only = no</pre><span class="anchor" id="line-125"></span><span class="anchor" id="line-126"></span><p class="line874">This finishes sharing your /home directory. The last thing we need to do is fixing a user. <span class="anchor" id="line-127"></span><span class="anchor" id="line-128"></span></p><p class="line874">Add users who can access your shares with the 'smbpasswd' command. <span class="anchor" id="line-129"></span><span class="anchor" id="line-130"></span></p><p class="line867"><span class="anchor" id="line-131"></span><span class="anchor" id="line-132"></span><span class="anchor" id="line-133"></span><span class="anchor" id="line-134"></span><span class="anchor" id="line-135"></span><span class="anchor" id="line-136"></span><span class="anchor" id="line-137"></span><span class="anchor" id="line-138"></span><span class="anchor" id="line-139"></span></p><pre><span class="anchor" id="line-1-5"></span>sudo  smbpasswd -a username
<span class="anchor" id="line-2-3"></span>
<span class="anchor" id="line-3-3"></span>New SMB password:
<span class="anchor" id="line-4-3"></span>Retype new SMB password:
<span class="anchor" id="line-5-3"></span>Added user username.
<span class="anchor" id="line-6-3"></span>
<span class="anchor" id="line-7-3"></span>sudo smbpasswd -e username
<span class="anchor" id="line-8"></span>Enabled user username.</pre><span class="anchor" id="line-140"></span><p class="line874">NOTE: the username used here should be a real user setup on your PC/Server. <span class="anchor" id="line-141"></span>Reload Samba for every change to users/passwords or 'smb.conf' <span class="anchor" id="line-142"></span><span class="anchor" id="line-143"></span></p><p class="line867"><span class="anchor" id="line-144"></span><span class="anchor" id="line-145"></span></p><pre><span class="anchor" id="line-1-6"></span>sudo /etc/init.d/samba reload</pre><span class="anchor" id="line-146"></span><span class="anchor" id="line-147"></span><p class="line867"><span class="u">NOTE</span>: If the above command doesn't work for you, try: <span class="anchor" id="line-148"></span><span class="anchor" id="line-149"></span><span class="anchor" id="line-150"></span></p><pre><span class="anchor" id="line-1-7"></span>sudo smbd reload</pre><span class="anchor" id="line-151"></span><span class="anchor" id="line-152"></span><p class="line874">That's the basis of Samba file-sharing. Please leave your comments about what else is needed here. <span class="anchor" id="line-153"></span><span class="anchor" id="line-154"></span></p><ul><li style="list-style-type:none"><p class="line862">- Can/should the SMB password be different from the user's system password? <a class="nonexistent" href="https://help.ubuntu.com/community/MartinSpacek">MartinSpacek</a> - 2007-11-19 <span class="anchor" id="line-155"></span><span class="anchor" id="line-156"></span></p></li></ul><p class="line867">
</p><h2 id="File_Sharing_.28Advanced.29">File Sharing (Advanced)</h2>
<span class="anchor" id="line-157"></span><span class="anchor" id="line-158"></span><p class="line874">We
 started with the base of Samba file-sharing. The above-mentioned items 
should be enough to get you started. Next we will add details that you 
might or might not need. <span class="anchor" id="line-159"></span><span class="anchor" id="line-160"></span><span class="anchor" id="line-161"></span></p><p class="line867">
</p><h3 id="If_you_have_more_than_one_network_card">If you have more than one network card</h3>
<span class="anchor" id="line-162"></span><span class="anchor" id="line-163"></span><span class="anchor" id="line-164"></span><p class="line874">If
 you have more than one network card (or interface) then you have to 
define where you want Samba to run. In smb.conf under the [global] 
section, add: <span class="anchor" id="line-165"></span><span class="anchor" id="line-166"></span></p><p class="line867"><span class="anchor" id="line-167"></span><span class="anchor" id="line-168"></span><span class="anchor" id="line-169"></span></p><pre><span class="anchor" id="line-1-8"></span>interfaces = 127.0.0.1, 192.168.0.31/24
<span class="anchor" id="line-2-4"></span>bind interfaces only = yes</pre><span class="anchor" id="line-170"></span><p class="line874">The first address (127.0.0.1), is a loopback network connection (it's your own machine). <span class="anchor" id="line-171"></span>The
 second address (192.168.0.31), is the address of the card you want 
Samba to run on, the second number (24) is the subnet default for a 
CLASS-C network. It may vary depending on your network. <span class="anchor" id="line-172"></span><span class="anchor" id="line-173"></span></p><p class="line874">With "bind interfaces only" you limit which interfaces on a machine will serve SMB requests. <span class="anchor" id="line-174"></span><span class="anchor" id="line-175"></span></p><p class="line874">You can limit which IP address can connect to your Samba server adding these lines: <span class="anchor" id="line-176"></span><span class="anchor" id="line-177"></span></p><p class="line867"><span class="anchor" id="line-178"></span><span class="anchor" id="line-179"></span><span class="anchor" id="line-180"></span></p><pre><span class="anchor" id="line-1-9"></span>hosts allow = 127.0.0.1, 192.168.0.31, 192.168.0.32
<span class="anchor" id="line-2-5"></span>hosts deny = 0.0.0.0/0</pre><span class="anchor" id="line-181"></span><p class="line874">The loopback address must be present in the first line. The second line deny access from all IP address not in the first line. <span class="anchor" id="line-182"></span><span class="anchor" id="line-183"></span></p><p class="line867">
</p><h3 id="Private_and_public_shares_in_same_config">Private and public shares in same config</h3>
<span class="anchor" id="line-184"></span><span class="anchor" id="line-185"></span><p class="line874">First you'll want to set this up in the [global] section of your smb.conf <span class="anchor" id="line-186"></span><span class="anchor" id="line-187"></span></p><p class="line867"><span class="anchor" id="line-188"></span><span class="anchor" id="line-189"></span><span class="anchor" id="line-190"></span><span class="anchor" id="line-191"></span><span class="anchor" id="line-192"></span><span class="anchor" id="line-193"></span></p><pre><span class="anchor" id="line-1-10"></span>[global]
<span class="anchor" id="line-2-6"></span>        security = user
<span class="anchor" id="line-3-4"></span>        encrypt passwords = true
<span class="anchor" id="line-4-4"></span>        map to guest = bad user
<span class="anchor" id="line-5-4"></span>        guest account = nobody</pre><span class="anchor" id="line-194"></span><span class="anchor" id="line-195"></span><p class="line867"><tt>security&nbsp;=&nbsp;user</tt> restricts logins to users on your server.  <tt>encrypt&nbsp;passwords&nbsp;=&nbsp;true</tt> is necessary for most modern versions of Windows to login to your shares.  <tt>map&nbsp;to&nbsp;guest&nbsp;=&nbsp;bad&nbsp;user</tt> will map login attempts with bad user names to the guest account you specify with <tt>guest&nbsp;account&nbsp;=&nbsp;nobody</tt>.  That is, if you attempt to login to the share with a user name not set up with <tt>smbpasswd</tt> the you will be logged in as the user <em>nobody</em>. <span class="anchor" id="line-196"></span><span class="anchor" id="line-197"></span></p><p class="line874">Next the private share <span class="anchor" id="line-198"></span><span class="anchor" id="line-199"></span></p><p class="line867"><span class="anchor" id="line-200"></span><span class="anchor" id="line-201"></span><span class="anchor" id="line-202"></span><span class="anchor" id="line-203"></span><span class="anchor" id="line-204"></span><span class="anchor" id="line-205"></span></p><pre><span class="anchor" id="line-1-11"></span>[private]
<span class="anchor" id="line-2-7"></span>        comment = Private Share
<span class="anchor" id="line-3-5"></span>        path = /path/to/share/point
<span class="anchor" id="line-4-5"></span>        browseable = no
<span class="anchor" id="line-5-5"></span>        read only = no</pre><span class="anchor" id="line-206"></span><span class="anchor" id="line-207"></span><p class="line862">If
 browseable is set to no the share will not show up on graphical 
browsers such a "My Network Places" on Windows or Places -&gt; Network 
on Ubuntu. <span class="anchor" id="line-208"></span><span class="anchor" id="line-209"></span></p><p class="line867"><tt>path</tt> is the path to the directory that you want to share out.  <tt>browseable&nbsp;=&nbsp;no</tt> will have the share not show up when users browse the network.  <tt>read&nbsp;only&nbsp;=&nbsp;no</tt> will let you, as an authenticated user, write to the share. <span class="anchor" id="line-210"></span><span class="anchor" id="line-211"></span></p><p class="line874">Finally, the public share <span class="anchor" id="line-212"></span><span class="anchor" id="line-213"></span></p><p class="line867"><span class="anchor" id="line-214"></span><span class="anchor" id="line-215"></span><span class="anchor" id="line-216"></span><span class="anchor" id="line-217"></span><span class="anchor" id="line-218"></span><span class="anchor" id="line-219"></span><span class="anchor" id="line-220"></span></p><pre><span class="anchor" id="line-1-12"></span>[public]
<span class="anchor" id="line-2-8"></span>        comment = Public Share
<span class="anchor" id="line-3-6"></span>        path = /path/to/share/point
<span class="anchor" id="line-4-6"></span>        read only = no
<span class="anchor" id="line-5-6"></span>        guest only = yes
<span class="anchor" id="line-6-4"></span>        guest ok = yes</pre><span class="anchor" id="line-221"></span><span class="anchor" id="line-222"></span><p class="line862">Again, <tt>path</tt> is the path to the directory that you want to share out.  <tt>read&nbsp;only&nbsp;=&nbsp;no</tt> will allow users to write to this share.  <tt>guest&nbsp;only&nbsp;=&nbsp;yes</tt> and <tt>guest&nbsp;ok&nbsp;=&nbsp;yes</tt> will allow guest logins and also force users to login as guests.  <strong>The user you specified with <tt>guest&nbsp;account</tt> in the [global] section must have write permissions on <tt>/path/to/share/point</tt> in order to write files to the share.</strong> <span class="anchor" id="line-223"></span><span class="anchor" id="line-224"></span></p><p class="line867"><strong>Note:</strong> When Windows attempts to access a SMB share it will use the current Windows user name and password.  The <tt>map&nbsp;to&nbsp;guest&nbsp;=&nbsp;bad&nbsp;user</tt>
 trick above allows access to the public share only if you give Samba an
 incorrect user name.  If you give it a valid user name, but a bad 
password, the login will fail and Windows will give you a password 
prompt when you try to access the share.  If you have the same user name
 for your Windows machine and your Ubuntu machine, you could be 
unwittingly giving the Samba server a valid user name, but invalid 
password.  To resolve this you will either have to change the Windows 
user name, or to remove that user name from the Samba password file with
 <tt>sudo&nbsp;smbpasswd&nbsp;-x&nbsp;[username]</tt>. <span class="anchor" id="line-225"></span><span class="anchor" id="line-226"></span></p><p class="line867"><strong>Note:</strong> The above uses <tt>security&nbsp;=&nbsp;user</tt>.
  To access the private shares you will have to make sure the user 
exists in smbpasswd.  These users must also already exist as normal 
users on your machine.  You add users to smbpasswd simply by running <tt>sudo&nbsp;smbpasswd&nbsp;-a&nbsp;[username]</tt> and giving a password. <span class="anchor" id="line-227"></span><span class="anchor" id="line-228"></span></p><p class="line867">
</p><h3 id="Setting_permissions">Setting permissions</h3>
<span class="anchor" id="line-229"></span><span class="anchor" id="line-230"></span><p class="line874">To set permissions of newly created documents / files edit /etc/samba/smb.conf and in the [global] section add : <span class="anchor" id="line-231"></span><span class="anchor" id="line-232"></span></p><p class="line867"><span class="anchor" id="line-233"></span><span class="anchor" id="line-234"></span><span class="anchor" id="line-235"></span></p><pre><span class="anchor" id="line-1-13"></span>create mask = 0644
<span class="anchor" id="line-2-9"></span>directory mask = 0755</pre><span class="anchor" id="line-236"></span><p class="line867"></p><hr><p class="line874"> <span class="anchor" id="line-237"></span><a href="https://help.ubuntu.com/community/CategoryNetworking">CategoryNetworking</a> <span class="anchor" id="line-238"></span><span class="anchor" id="bottom"></span></p></div><div id="pagebottom"></div>
</div>


            </div>
<p id="pageinfo" class="info" dir="ltr" lang="en">Samba/SambaServerGuide  (last edited 2013-12-31 20:58:58 by <span title="ldevis @ adsl-76-243-179-80.dsl.bcvloh.sbcglobal.net[76.243.179.80]"><a class="interwiki" href="https://launchpad.net/%7Eldevis" title="ldevis @ adsl-76-243-179-80.dsl.bcvloh.sbcglobal.net[76.243.179.80]">ldevis</a></span>)</p>

</div>
            
            <div id="footer">
		<p>
		The material on this wiki is available under a free license, see <a href="https://help.ubuntu.com/community/License">Copyright / License</a> for details<br><b>You</b> can contribute to this wiki, see 
		<a href="https://help.ubuntu.com/community/WikiGuide">Wiki Guide</a> for details
		</p>
            </div>

        </div>


</body></html>