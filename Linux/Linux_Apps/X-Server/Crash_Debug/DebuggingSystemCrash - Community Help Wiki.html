<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html><head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta name="robots" content="index,nofollow">

<title>DebuggingSystemCrash - Community Help Wiki</title>
<script type="text/javascript" src="DebuggingSystemCrash%20-%20Community%20Help%20Wiki_files/common.html"></script>

<script type="text/javascript">
<!--
var search_hint = "Search";
//-->
</script>


<link rel="stylesheet" type="text/css" charset="utf-8" media="all" href="DebuggingSystemCrash%20-%20Community%20Help%20Wiki_files/common.css">
<link rel="stylesheet" type="text/css" charset="utf-8" media="screen" href="DebuggingSystemCrash%20-%20Community%20Help%20Wiki_files/screen.css">
<link rel="stylesheet" type="text/css" charset="utf-8" media="print" href="DebuggingSystemCrash%20-%20Community%20Help%20Wiki_files/print.css">
<link rel="stylesheet" type="text/css" charset="utf-8" media="projection" href="DebuggingSystemCrash%20-%20Community%20Help%20Wiki_files/projection.css">

<!-- css only for MS IE6/IE7 browsers -->
<!--[if lt IE 8]>
   <link rel="stylesheet" type="text/css" charset="utf-8" media="all" href="/moin_static192/light/css/msie.css">
<![endif]-->





<link rel="Start" href="https://help.ubuntu.com/community/CommunityHelpWiki">
<link rel="Alternate" title="Wiki Markup" href="https://help.ubuntu.com/community/DebuggingSystemCrash?action=raw">
<link rel="Alternate" media="print" title="Print View" href="https://help.ubuntu.com/community/DebuggingSystemCrash?action=print">
<link rel="Search" href="https://help.ubuntu.com/community/FindPage">
<link rel="Index" href="https://help.ubuntu.com/community/TitleIndex">
<link rel="Glossary" href="https://help.ubuntu.com/community/WordIndex">
<link rel="Help" href="https://help.ubuntu.com/community/HelpOnFormatting">
</head>

<body dir="ltr" lang="en">


    <div id="leftbanner">
    </div>
    <div id="rightbanner">
    </div>
    <div id="container">
        <div id="container-inner">
	    <div id="mothership">
		<ul>
	            <li><a href="http://www.ubuntu.com/partners">Partners</a> </li>
        	    <li><a href="http://www.ubuntu.com/support">Support</a></li>
        	    <li><a href="http://www.ubuntu.com/community">Community</a></li>
        	    <li><a href="http://www.ubuntu.com/">Ubuntu.com</a></li>
	        </ul>
	    </div>
            <div id="header">
                <h1 id="ubuntu-header"><a href="https://help.ubuntu.com/">Ubuntu Documentation</a></h1>
                <ul id="main-menu">
                    <li><a href="https://help.ubuntu.com/">Official Documentation</a></li>
                    <li><a class="main-menu-item current" href="https://help.ubuntu.com/community/CommunityHelpWiki">Community Help Wiki</a></li>
                    <li><a href="http://community.ubuntu.com/contribute/documentation/">Contribute</a></li>
                </ul>
            </div>
            <div id="menu-search">
                <div id="subheader"> 
                    <div class="subheader-menu"> 
                        <div id="second-nav">
<ul id="username"><li><a class="nbinfo" href="https://help.ubuntu.com/community/DebuggingSystemCrash?action=info" rel="nofollow">Page History</a></li><li><a href="https://help.ubuntu.com/community/DebuggingSystemCrash?action=login&amp;login=1" id="login" rel="nofollow">Login to edit</a></li></ul>
 </div> 
    <div id="user-info"> 
    </div>
 

                            
                        </div> 
                    </div> 


                    <div id="search-box">

<noscript>
 <form action="http://www.google.com/cse" id="cse-search-box">
   <div>
     <input type="hidden" name="cx" value="003883529982892832976:e2vwumte3fq" />
     <input type="hidden" name="ie" value="UTF-8" />
     <input type="text" name="q" size="21" />
     <input type="submit" name="sa" value="Search" />
   </div>
 </form>
</noscript>

<script>
 document.write('<form action="https://help.ubuntu.com/search.html" id="cse-search-box">');
 document.write('  <div>');
 document.write('    <input type="hidden" name="cof" value="FORID:9" />');
 document.write('    <input type="hidden" name="cx" value="003883529982892832976:e2vwumte3fq" />');
 document.write('    <input type="hidden" name="ie" value="UTF-8" />');
 document.write('    <input type="text" name="q" size="21" />');
 document.write('    <input type="submit" name="sa" value="Search" />');
 document.write('  </div>');
 document.write('</form>');
</script><form action="https://help.ubuntu.com/search.html" id="cse-search-box">  <div>    <input name="cof" value="FORID:9" type="hidden">    <input name="cx" value="003883529982892832976:e2vwumte3fq" type="hidden">    <input name="ie" value="UTF-8" type="hidden">    <input name="q" size="21" type="text">    <input name="sa" value="Search" type="submit">  </div></form>


                    </div>
                </div>
                <div id="title"><h1>
<span id="pagelocation"><a class="backlink" href="https://help.ubuntu.com/community/DebuggingSystemCrash?action=fullsearch&amp;value=linkto%3A%22DebuggingSystemCrash%22&amp;context=180" rel="nofollow" title="Click to do a full-text search for this title">DebuggingSystemCrash</a></span>
</h1>
                </div>
            <div id="cwt-nav3">

 <hr class="clear">
            </div>
                <div id="cwt-content" class="clearfix content-area">

<div id="page" dir="ltr" lang="en">
<div dir="ltr" id="content" lang="en"><span class="anchor" id="top"></span>
<span class="anchor" id="line-1"></span><div><table style="float:right;  font-size: 0.9em;  width:40%;  background:#F1F1ED;  margin: 0 0 1em 1em;"><tbody><tr>  <td style="padding:0.5em;"><p class="line891"></p><div class="table-of-contents"><p class="table-of-contents-heading">Contents</p><ol><li>
<a href="#Initial_debugging">Initial debugging</a></li><li>
<a href="#Memory_test_passed">Memory test passed</a><ol><li>
<a href="#Kernel_crash">Kernel crash</a></li></ol></li><li>
<a href="#Remote_debugging">Remote debugging</a><ol><li>
<a href="#SSH">SSH</a></li><li>
<a href="#Netconsole">Netconsole</a></li></ol></li><li>
<a href="#In_X_window_mode">In X window mode</a></li><li>
<a href="#Other_crashes">Other crashes</a></li></ol></div></td>
</tr>
</tbody></table></div><span class="anchor" id="line-2"></span><span class="anchor" id="line-3"></span><p class="line867">
</p><h1 id="Initial_debugging">Initial debugging</h1>
<span class="anchor" id="line-4"></span><span class="anchor" id="line-5"></span><ul><li><p class="line862">Before filing any bug reports or support requests, perform a <a href="https://help.ubuntu.com/community/MemoryTest">MemoryTest</a>. <span class="anchor" id="line-6"></span><span class="anchor" id="line-7"></span></p></li></ul><p class="line867">
</p><h1 id="Memory_test_passed">Memory test passed</h1>
<span class="anchor" id="line-8"></span><span class="anchor" id="line-9"></span><ul><li>If
 the memory test passed, it is vital to capture a log of this crash 
(kernel panic call trace, xorg backtrace, etc.) in order to fix the 
problem. <span class="anchor" id="line-10"></span><span class="anchor" id="line-11"></span></li><li class="gap">If your system crashes when a particular action occurs, and this is repeatable every time, try the following steps: <span class="anchor" id="line-12"></span><span class="anchor" id="line-13"></span><ol type="1"><li><p class="line862">Try to reproduce the crash on a text console (<tt class="backtick">Control</tt>+<tt class="backtick">Alt</tt>+<tt class="backtick">F1</tt>) if possible.  If the crash occurs during startup, select the <tt class="backtick">recovery&nbsp;mode</tt> option to disable the splash screen <span class="anchor" id="line-14"></span></p></li><li><p class="line862">When the crash occurs, press <tt class="backtick">Alt</tt>+<tt class="backtick">SysRq</tt>+<tt class="backtick">1</tt> (one, not L) followed by <tt class="backtick">Alt</tt>+<tt class="backtick">SysRq</tt>+<tt class="backtick">t</tt>.
  If using a text console, you should see a trace dumped to the screen. 
 If the system is sufficiently alive, it will also be logged to <tt class="backtick">/var/log/kern.log</tt> and visible in the output from <tt class="backtick">dmesg</tt>.
  This information shows where the crash occurred, and should be 
included in any problem reports. If the output is not saved in any file,
 or the system is so bad off that you cannot retrieve it, you can either
 take a digital photo, or hand write the results. Almost all of the 
output is important (so please don't copy the one line you think is 
important, because context means everything). <span class="anchor" id="line-15"></span></p><ul><li><p class="line862">For a full list of <tt class="backtick">Alt</tt>+<tt class="backtick">SysRq</tt> options, see the <a class="http" href="http://lxr.linux.no/source/Documentation/sysrq.txt">kernel documentation</a>. <span class="anchor" id="line-16"></span></p></li></ul></li></ol></li><li>If
 unable to log the full backtrace, supply a digital photo of the screen 
to capture the crash. It most important to capture the beginning of the 
kernel oops or panic. <span class="anchor" id="line-17"></span><span class="anchor" id="line-18"></span></li></ul><p class="line867">
</p><h2 id="Kernel_crash">Kernel crash</h2>
<span class="anchor" id="line-19"></span><span class="anchor" id="line-20"></span><p class="line862">If a kernel crash completely locks the system, take a look at <a class="https" href="https://wiki.ubuntu.com/KernelTeam/CrashdumpRecipe">https://wiki.ubuntu.com/KernelTeam/CrashdumpRecipe</a>.
 If using linux-crashdump (above) is not successful try and see if any 
backtrace was logged to /var/log/kern.log.0. Please attach this file if 
anything was captured. <span class="anchor" id="line-21"></span><span class="anchor" id="line-22"></span></p><p class="line867">
</p><h1 id="Remote_debugging">Remote debugging</h1>
<span class="anchor" id="line-23"></span><span class="anchor" id="line-24"></span><p class="line867">
</p><h2 id="SSH">SSH</h2>
<span class="anchor" id="line-25"></span><span class="anchor" id="line-26"></span><p class="line874">Some
 crashes, in particular those involving the X server, are impossible to 
reproduce on the text console. The best way is then to use a second 
computer from which you can log in to the "sick" machine using ssh. <span class="anchor" id="line-27"></span><span class="anchor" id="line-28"></span></p><ol type="1"><li>On
 the "sick" machine, install openssh-server (make sure you have good 
passwords on all user accounts if your machine is connected to the 
Internet). <span class="anchor" id="line-29"></span></li><li>On the 
second machine, install openssh-client. If this is a Windows machine, 
install Putty, a free SSH client. If it is a MacOSX machine, it already 
has the ssh client installed. <span class="anchor" id="line-30"></span></li><li><p class="line862">Find the IP address of the sick machine, for instance by running <tt>ip&nbsp;addr</tt>.
 If both machines are running Ubuntu 7.04 or MacOSX, you can use the 
machine name (e.g. mycomputer.local) instead of the IP address. <span class="anchor" id="line-31"></span></p></li><li><p class="line862">Connect to the sick machine, for instance <tt>ssh&nbsp;myuser@192.168.1.3</tt> <span class="anchor" id="line-32"></span></p></li><li><p class="line862">Inside the ssh session, run <tt>sudo&nbsp;cat&nbsp;/proc/kmsg</tt> <span class="anchor" id="line-33"></span></p></li><li><p class="line862">Optionally start a second ssh session to run for instance <tt>tail&nbsp;-f&nbsp;/var/log/syslog</tt> or other commands. You can emulate the above Sys<tt class="backtick"></tt>Rq key presses, for instance the Alt+Sys<tt class="backtick"></tt>Rq+t combination, by running <tt>&nbsp;echo&nbsp;t&nbsp;|&nbsp;sudo&nbsp;tee&nbsp;/proc/sysrq-trigger</tt> <span class="anchor" id="line-34"></span></p></li><li>Reproduce the crash <span class="anchor" id="line-35"></span></li><li>Watch
 any error messages in the ssh client window on the second machine, and 
save them to a file that you attach to the bug report. <span class="anchor" id="line-36"></span><span class="anchor" id="line-37"></span></li></ol><p class="line867">
</p><h2 id="Netconsole">Netconsole</h2>
<span class="anchor" id="line-38"></span><span class="anchor" id="line-39"></span><p class="line862">If the above doesn't work, one may use <a class="https" href="https://wiki.ubuntu.com/KernelTeam/Netconsole">Netconsole</a>. <span class="anchor" id="line-40"></span><span class="anchor" id="line-41"></span></p><p class="line867">
</p><h1 id="In_X_window_mode">In X window mode</h1>
<span class="anchor" id="line-42"></span><span class="anchor" id="line-43"></span><p class="line874">Sometimes
 crashes occur in X, and so terminal access is not available (to capture
 the kernel backtrace). When this occurs, the user should try to 
recreate the crash at the console (Ctrl+Alt+F1). If this is not 
possible, then annotate the bug as such.  <span class="anchor" id="line-44"></span><span class="anchor" id="line-45"></span></p><p class="line867">
</p><h1 id="Other_crashes">Other crashes</h1>
<span class="anchor" id="line-46"></span><span class="anchor" id="line-47"></span><p class="line862">If
 the X server crashes (you're thrown back to the login screen, or screen
 goes black or frozen but there is activity "below") see <a class="https" href="https://wiki.ubuntu.com/X/Debugging">DebuggingXorg</a>. See <a class="https" href="https://wiki.ubuntu.com/DebuggingProgramCrash">DebuggingProgramCrash</a> if just a program and not the whole system is crashing. <span class="anchor" id="line-48"></span><span class="anchor" id="bottom"></span></p></div><div id="pagebottom"></div>
</div>


            </div>
<p id="pageinfo" class="info" dir="ltr" lang="en">DebuggingSystemCrash  (last edited 2013-09-08 12:52:51 by <span title="oliver-story @ 180.148.125.44[180.148.125.44]"><a class="interwiki" href="https://launchpad.net/%7Eoliver-story" title="oliver-story @ 180.148.125.44[180.148.125.44]">oliver-story</a></span>)</p>

</div>
            
            <div id="footer">
		<p>
		The material on this wiki is available under a free license, see <a href="https://help.ubuntu.com/community/License">Copyright / License</a> for details<br><b>You</b> can contribute to this wiki, see 
		<a href="https://help.ubuntu.com/community/WikiGuide">Wiki Guide</a> for details
		</p>
            </div>

        </div>


</body></html>