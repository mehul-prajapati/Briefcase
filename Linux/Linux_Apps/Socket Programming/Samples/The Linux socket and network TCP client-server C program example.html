<html><head>
<meta name="keywords" content="RAW socket, industrials data, rapid designs, certification training, applications software, messagging, computing technology, development, server, C program, computer hardware, application software, opensource, OS, financials data, databases, network programming, networking, medicals record">
<meta name="description" content="This page demonstrates how to develop or build the Linux socket TCP cleint-server applications. The content includes C code sample of the Transmission Control Protocol (TCP) program which tested on Linux Fedora OS with sample interactive client-server console outputs">
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta http-equiv="Content-Language" content="en-us">
<title>The Linux socket and network TCP client-server C program example</title>
<style>
<!--
 p.MsoNormal, li.MsoNormal
	{margin:0mm;
	margin-bottom:.0001pt;
	font-size:10.0pt;
	font-family:"Times New Roman";}
h1
	{margin-right:0mm;
	margin-left:0mm;
	font-size:24.0pt;
	font-family:"Times New Roman";
	font-weight:bold;}
a:link
	{color:blue;
	text-decoration:none;}
a:visited
	{color:brown;
	text-decoration:none;}
a:hover
	{color: red;
	text-decoration: none;}
p
	{margin-right:0mm;
	margin-left:0mm;
	font-size:12.0pt;
	font-family:"Times New Roman";}
 ol
	{margin-bottom:0mm;}
-->
</style>
</head>

<body topmargin="20" leftmargin="40" rightmargin="40" bottommargin="20" vlink="#800080" lang="EN-US" link="#0000FF">

<div class="Section1">
<h1 style="margin-top: 0; margin-bottom: 0" align="center">
<span style="font-weight: 400"><font size="4" face="Verdana">|
<a title="The Windows network programming in .NET using C#, VB .NET and C++/CLI" target="_top" href="http://www.winsocketdotnetworkprogramming.com/">
Winsock &amp; .NET</a> |
<a title="Windows network programming - Windows sockets/Winsock" target="_top" href="http://www.tenouk.com/Winsock/Winsock2story.html">
<span style="text-decoration: none"><font color="#FF0000">Winsock</font></span></a> 
| <span style="text-decoration: none"><font color="#000000">
<a title="More TCP, UDP, Client-Server working program examples" target="_top" href="http://www.tenouk.com/Module41.html">
&lt; More TCP, UDP, Client-Server Examples</a></font></span> 
| <span style="text-decoration: none">
<font color="#800000">
<a title="The Linux socket, TCP/IP, open source programming tutorial using C and GCC" target="_top" href="http://www.tenouk.com/cnlinuxsockettutorials.html">
Linux Socket Index</a></font></span> 
| <span style="text-decoration: none"><font color="#000000">
<a title="Iterative server TCP/IP program example using GNU C language" target="_top" href="http://www.tenouk.com/Module41b.html">
Iterative Server Program Example &gt;</a></font></span> 
|</font></span></h1>
<hr noshade="noshade" color="#FF0000">
<p class="MsoNormal" style="text-align:left; margin-top:0; margin-bottom:0" align="center">&nbsp;</p>
<p class="MsoNormal" style="margin-top: 0; margin-bottom: 0">&nbsp;</p>
<p class="MsoNormal" style="margin-top: 0; margin-bottom: 0">&nbsp;</p>
<p class="MsoNormal" style="margin-top: 0; margin-bottom: 0">&nbsp;</p>
<h1 style="margin:0 0mm;text-align:center; margin-bottom:0" align="center">
<span style="font-family:Neo Sans Intel Medium;color:#000080; font-weight:400">
<font size="6">NETWORK PROGRAMMING</font></span></h1>
<h1 style="margin:0 0mm;text-align:center; margin-bottom:0" align="center">
<span style="font-family:Neo Sans Intel Medium;color:#000080; font-weight:400">
<font size="6">LINUX SOCKET PART 11: TCP CLIENT-SERVER CODE SAMPLE</font></span></h1>
<p class="MsoNormal" style="margin-top: 0; margin-bottom: 0">&nbsp;</p>
<p class="MsoNormal" style="margin-top: 0; margin-bottom: 0">&nbsp;</p>
<p class="MsoNormal" style="margin-top: 0; margin-bottom: 0">&nbsp;</p>
<p class="MsoNormal" style="margin-top: 0; margin-bottom: 0">&nbsp;</p>
<p class="MsoNormal" style="margin-top: 0; margin-bottom: 0">&nbsp;</p>
<table style="border-collapse: collapse" id="table1" width="100%" border="0">
<tbody>
<tr>
<td valign="top" align="left" bgcolor="#000000">
<p style="margin-top: 0; margin-bottom: 0" align="center">
<script src="The%20Linux%20socket%20and%20network%20TCP%20client-server%20C%20program%20example_files/beacon.js" async=""></script><script type="text/javascript"><!--
google_ad_client = "pub-8089415323104206";
/* 160x600, created 6/1/08linsoc */
google_ad_slot = "4269410932";
google_ad_width = 160;
google_ad_height = 600;
//-->
</script>
<script type="text/javascript" src="The%20Linux%20socket%20and%20network%20TCP%20client-server%20C%20program%20example_files/show_ads.js">
			
</script><ins style="display:inline-table;border:none;height:600px;margin:0;padding:0;position:relative;visibility:visible;width:160px;background-color:transparent"><ins id="aswift_0_anchor" style="display:block;border:none;height:600px;margin:0;padding:0;position:relative;visibility:visible;width:160px;background-color:transparent"><iframe marginwidth="0" marginheight="0" vspace="0" hspace="0" allowtransparency="true" onload="var i=this.id,s=window.google_iframe_oncopy,H=s&amp;&amp;s.handlers,h=H&amp;&amp;H[i],w=this.contentWindow,d;try{d=w.document}catch(e){}if(h&amp;&amp;d&amp;&amp;(!d.body||!d.body.firstChild)){if(h.call){setTimeout(h,0)}else if(h.match){try{h=s.upd(h,i)}catch(e){}w.location.replace(h)}}" id="aswift_0" name="aswift_0" style="left:0;position:absolute;top:0;" width="160" frameborder="0" height="600" scrolling="no"></iframe></ins></ins>
</p>
<h1 style="margin-top: 0; margin-bottom: 0" align="center">
<span style="font-weight: 400"><b>
<font size="3" face="Verdana" color="#FF0000">Menu</font></b></span></h1>
<p style="margin-top: 0; margin-bottom: 0">&nbsp;</p>
<h1 style="margin: 0"><font size="3" face="Verdana">
<a title="TCP/IP network programming" target="_top" href="http://www.tenouk.com/Module39.html">
<span style="text-decoration: none; font-weight:400">Network Story 1</span></a></font></h1>
<h1 style="margin: 0"><font size="3" face="Verdana">
<a title="More on TCP/IP network programming" target="_top" href="http://www.tenouk.com/Module39a.html">
<span style="text-decoration: none; font-weight:400">Network Story 2</span></a></font></h1>
<h1 style="margin: 0"><font size="3" face="Verdana">
<a target="_top" href="http://www.tenouk.com/Module39b.html">
<span style="text-decoration: none; font-weight:400">Network Story 3</span></a></font></h1>
<h1 style="margin: 0"><font size="3" face="Verdana">
<a title="More on TCP/IP network programming" target="_top" href="http://www.tenouk.com/Module39c.html">
<span style="text-decoration: none; font-weight:400">Network Story 4</span></a></font></h1>
<h1 style="margin: 0"><font size="3" face="Verdana">
<a title="More on TCP/IP network programming" target="_top" href="http://www.tenouk.com/Module39d.html">
<span style="text-decoration: none; font-weight:400">Network Story 5</span></a></font></h1>
<h1 style="margin: 0"><font size="3" face="Verdana">
<a title="More on TCP/IP network programming" target="_top" href="http://www.tenouk.com/Module40.html">
<span style="text-decoration: none; font-weight:400">Network Story 6</span></a></font></h1>
<h1 style="margin: 0"><font size="3" face="Verdana">
<span style="text-decoration: none; font-weight:400">
<a title="More on TCP/IP network C programming program examples" target="_top" href="http://www.tenouk.com/Module40a.html">
Socket Example 1</a></span></font></h1>
<h1 style="margin: 0"><font size="3" face="Verdana">
<span style="text-decoration: none; font-weight:400">
<a title="More on TCP/IP network C programming program examples" target="_top" href="http://www.tenouk.com/Module40b.html">
Socket Example 2</a></span></font></h1>
<h1 style="margin: 0"><font size="3" face="Verdana">
<span style="text-decoration: none; font-weight:400">
<a title="More on TCP/IP network C programming program examples" target="_top" href="http://www.tenouk.com/Module40c.html">
Socket Example 3</a></span></font></h1>
<h1 style="margin: 0"><font size="3" face="Verdana">
<span style="text-decoration: none; font-weight:400">
<a title="More on TCP/IP network C programming program examples" target="_top" href="http://www.tenouk.com/Module41.html">
Socket Example 4</a></span></font></h1>
<h1 style="margin: 0"><font size="3" face="Verdana">
<span style="text-decoration: none; font-weight:400">
<a title="More on TCP/IP network C programming program examples" target="_top" href="http://www.tenouk.com/Module41a.html">
Socket Example 5</a></span></font></h1>
<h1 style="margin: 0"><font size="3" face="Verdana">
<span style="text-decoration: none; font-weight:400">
<a title="More on TCP/IP network C programming program examples" target="_top" href="http://www.tenouk.com/Module41b.html">
Socket Example 6</a></span></font></h1>
<h1 style="margin: 0"><font size="3" face="Verdana">
<span style="text-decoration: none; font-weight:400">
<a title="More on TCP/IP network C programming program examples" target="_top" href="http://www.tenouk.com/Module41c.html">
Socket Example 7</a></span></font></h1>
<h1 style="margin: 0"><font size="3" face="Verdana">
<a title="Advanced TCP/IP network C programming" target="_top" href="http://www.tenouk.com/Module42.html">
<span style="text-decoration: none; font-weight:400">Advanced TCP/IP 
1</span></a></font></h1>
<h1 style="margin: 0"><font size="3" face="Verdana">
<a title="More on advanced TCP/IP network C programming" target="_top" href="http://www.tenouk.com/Module42a.html">
<span style="text-decoration: none; font-weight:400">Advanced TCP/IP 
2</span></a></font></h1>
<h1 style="margin: 0"><font size="3" face="Verdana">
<a title="More on advanced TCP/IP network C programming" target="_top" href="http://www.tenouk.com/Module43.html">
<span style="text-decoration: none; font-weight:400">Advanced TCP/IP 
3</span></a></font></h1>
<h1 style="margin: 0"><font size="3" face="Verdana">
<a title="More on advanced TCP/IP network C programming program examples" target="_top" href="http://www.tenouk.com/Module43a.html">
<span style="text-decoration: none; font-weight:400">Advanced TCP/IP 
4</span></a></font></h1>
<h1 style="margin: 0"><font size="3" face="Verdana">
<span style="text-decoration: none">
<a title="More on advanced TCP/IP network C programming program examples" target="_top" href="http://www.tenouk.com/Module43b.html">
<span style="text-decoration: none; font-weight:400">Advanced TCP/IP 
5</span></a></span></font></h1>
</td>
<td valign="top" width="83%" align="left">
<p class="MsoNormal" style="margin-top: 0; margin-bottom: 0">
<font size="3" face="Arial">Working program examples if any compiled 
using </font><font size="3" face="Arial" color="#0000FF">
<a title="Using gcc gdb and g++ on Linux Fedora" target="_blank" href="http://www.tenouk.com/Module000.html">
<span style="text-decoration: none">gcc</span></a></font><font face="Arial"><font size="3">, 
tested using the public IPs, run on <b>Linux Fedora 3 </b>with several 
times update, as normal user.&nbsp; The Fedora machine used for the 
testing having the </font><span style="color:green"><font size="3">"</font></span></font><span style="font-family:&quot;Arial&quot;"><font size="3">No 
Stack Execute</font></span><font face="Arial"><span style="color:green"><font size="3">"</font></span><font size="3"> 
disabled and the SELinux set to default configuration.&nbsp; All the 
program example is generic.&nbsp; Beware codes that expand more than 
one line.</font></font></p>
<p class="MsoNormal" style="margin-top: 0; margin-bottom: 0">&nbsp;</p>
<p class="MsoNormal" style="text-autospace:none; margin-top:0; margin-bottom:0">
<b><span style="font-family:Arial"><font size="3">Example: Connecting 
a TCP client to a server, a client program</font></span></b></p>
<ul type="square">
<li>
<p style="text-autospace:
none; margin-top:0; margin-bottom:0"><font face="Arial">Well, let try the client 
program that will connect to the previous server program.</font></p>
</li>
<li>
<p style="text-autospace:
none; margin-top:0; margin-bottom:0"><font face="Arial">The following example shows 
how to connect a client socket program to a connection-oriented 
server.</font></p>
</li>
</ul>
<blockquote>
<p class="MsoNormal" style="margin:0; ">
<span style="font-family:&quot;Courier New&quot;;color:#008000">
<font size="3">/************tcpclient.c************************/</font></span></p>
<p class="MsoNormal" style="margin:0; ">
<span style="font-family:&quot;Courier New&quot;;color:#008000">
<font size="3">/* Header files needed to use the sockets API. */</font></span></p>
<p class="MsoNormal" style="margin:0; ">
<span style="font-family:&quot;Courier New&quot;;color:#008000">
<font size="3">/* File contains Macro, Data Type and */</font></span></p>
<p class="MsoNormal" style="margin:0; ">
<span style="font-family:&quot;Courier New&quot;;color:#008000">
<font size="3">/* Structure definitions along with Function */</font></span></p>
<p class="MsoNormal" style="margin:0; ">
<span style="font-family:&quot;Courier New&quot;;color:#008000">
<font size="3">/* prototypes. */</font></span></p>
<p class="MsoNormal" style="margin:0; ">
<span style="font-family:&quot;Courier New&quot;;color:blue">
<font size="3">#include &lt;stdio.h&gt;</font></span></p>
<p class="MsoNormal" style="margin:0; ">
<span style="font-family:&quot;Courier New&quot;;color:blue">
<font size="3">#include &lt;stdlib.h&gt;</font></span></p>
<p class="MsoNormal" style="margin:0; ">
<span style="font-family:&quot;Courier New&quot;;color:blue">
<font size="3">#include &lt;string.h&gt;</font></span></p>
<p class="MsoNormal" style="margin:0; ">
<span style="font-family:&quot;Courier New&quot;;color:blue">
<font size="3">#include &lt;sys/types.h&gt;</font></span></p>
<p class="MsoNormal" style="margin:0; ">
<span style="font-family:&quot;Courier New&quot;;color:blue">
<font size="3">#include &lt;sys/socket.h&gt;</font></span></p>
<p class="MsoNormal" style="margin:0; ">
<span style="font-family:&quot;Courier New&quot;;color:blue">
<font size="3">#include &lt;netinet/in.h&gt;</font></span></p>
<p class="MsoNormal" style="margin:0; ">
<span style="font-family:&quot;Courier New&quot;;color:blue">
<font size="3">#include &lt;arpa/inet.h&gt;</font></span></p>
<p class="MsoNormal" style="margin:0; ">
<span style="font-family:&quot;Courier New&quot;;color:blue">
<font size="3">#include &lt;netdb.h&gt;</font></span></p>
<p class="MsoNormal" style="margin:0; ">
<span style="font-family:&quot;Courier New&quot;;color:blue">
<font size="3">#include &lt;unistd.h&gt;</font></span></p>
<p class="MsoNormal" style="margin:0; ">
<span style="font-family:&quot;Courier New&quot;;color:blue">
<font size="3">#include &lt;errno.h&gt;</font></span></p>
<p class="MsoNormal" style="margin:0; ">
<span style="font-family:&quot;Courier New&quot;;color:#008000">
<font size="3">/* BufferLength is 100 bytes */</font></span></p>
<p class="MsoNormal" style="margin:0; ">
<span style="font-family:&quot;Courier New&quot;;color:blue">
<font size="3">#define BufferLength 100</font></span></p>
<p class="MsoNormal" style="margin:0; ">
<span style="font-family:&quot;Courier New&quot;;color:#008000">
<font size="3">/* Default host name of server system. Change it 
to your default */</font></span></p>
<p class="MsoNormal" style="margin:0; ">
<span style="font-family:&quot;Courier New&quot;;color:#008000">
<font size="3">/* server hostname or IP.&nbsp; If the user do not 
supply the hostname */</font></span></p>
<p class="MsoNormal" style="margin:0; ">
<span style="font-family:&quot;Courier New&quot;;color:#008000">
<font size="3">/* as an argument, the_server_name_or_IP will be 
used as default*/</font></span></p>
<p class="MsoNormal" style="margin:0; ">
<span style="font-family:&quot;Courier New&quot;;color:blue">
<font size="3">#define SERVER "The_server_name_or_IP"</font></span></p>
<p class="MsoNormal" style="margin:0; ">
<span style="font-family:&quot;Courier New&quot;;color:#008000">
<font size="3">/* Server's port number */</font></span></p>
<p class="MsoNormal" style="margin:0; ">
<span style="font-family:&quot;Courier New&quot;;color:blue">
<font size="3">#define SERVPORT 3111</font></span></p>
<p class="MsoNormal" style="margin:0; ">&nbsp;</p>
<p class="MsoNormal" style="margin:0; ">
<span style="font-family:&quot;Courier New&quot;;color:#008000">
<font size="3">/* Pass in 1 parameter which is either the */</font></span></p>
<p class="MsoNormal" style="margin:0; ">
<span style="font-family:&quot;Courier New&quot;;color:#008000">
<font size="3">/* address or host name of the server, or */</font></span></p>
<p class="MsoNormal" style="margin:0; ">
<span style="font-family:&quot;Courier New&quot;;color:#008000">
<font size="3">/* set the server name in the #define SERVER ... 
*/</font></span></p>
<p class="MsoNormal" style="margin:0; ">
<span style="font-family:&quot;Courier New&quot;;color:blue">
<font size="3">int main(int argc, char *argv[])</font></span></p>
<p class="MsoNormal" style="margin:0; ">
<span style="font-family:&quot;Courier New&quot;;color:blue">
<font size="3">{</font></span></p>
<p class="MsoNormal" style="margin:0; ">
<span style="font-family:&quot;Courier New&quot;;color:#008000">
<font size="3">/* Variable and structure definitions. */</font></span></p>
<p class="MsoNormal" style="margin:0; ">
<span style="font-family:&quot;Courier New&quot;;color:blue">
<font size="3">int sd, rc, length = sizeof(int);</font></span></p>
<p class="MsoNormal" style="margin:0; ">
<span style="font-family:&quot;Courier New&quot;;color:blue">
<font size="3">struct sockaddr_in serveraddr;</font></span></p>
<p class="MsoNormal" style="margin:0; ">
<span style="font-family:&quot;Courier New&quot;;color:blue">
<font size="3">char buffer[BufferLength];</font></span></p>
<p class="MsoNormal" style="margin:0; ">
<span style="font-family:&quot;Courier New&quot;;color:blue">
<font size="3">char server[255];</font></span></p>
<p class="MsoNormal" style="margin:0; ">
<span style="font-family:&quot;Courier New&quot;;color:blue">
<font size="3">char temp;</font></span></p>
<p class="MsoNormal" style="margin:0; ">
<span style="font-family:&quot;Courier New&quot;;color:blue">
<font size="3">int totalcnt = 0;</font></span></p>
<p class="MsoNormal" style="margin:0; ">
<span style="font-family:&quot;Courier New&quot;;color:blue">
<font size="3">struct hostent *hostp;</font></span></p>
<p class="MsoNormal" style="margin:0; ">
<span style="font-family:&quot;Courier New&quot;;color:blue">
<font size="3">char data[100] = "This is a test string from client 
lol!!! ";</font></span></p>
<p class="MsoNormal" style="margin:0; ">&nbsp;</p>
<p class="MsoNormal" style="margin:0; ">
<span style="font-family:&quot;Courier New&quot;;color:#008000">
<font size="3">/* The socket() function returns a socket */</font></span></p>
<p class="MsoNormal" style="margin:0; ">
<span style="font-family:&quot;Courier New&quot;;color:#008000">
<font size="3">/* descriptor representing an endpoint. */</font></span></p>
<p class="MsoNormal" style="margin:0; ">
<span style="font-family:&quot;Courier New&quot;;color:#008000">
<font size="3">/* The statement also identifies that the */</font></span></p>
</blockquote>
</td>
</tr>
</tbody>
</table>
<blockquote>
<p class="MsoNormal" style="margin:0; ">
<span style="font-family:&quot;Courier New&quot;;color:#008000">
<font size="3">/* INET (Internet Protocol) address family */</font></span></p>
<p class="MsoNormal" style="margin:0; ">
<span style="font-family:&quot;Courier New&quot;;color:#008000">
<font size="3">/* with the TCP transport (SOCK_STREAM) */</font></span></p>
<p class="MsoNormal" style="margin:0; ">
<span style="font-family:&quot;Courier New&quot;;color:#008000">
<font size="3">/* will be used for this socket. */</font></span></p>
<p class="MsoNormal" style="margin:0; ">
<span style="font-family:&quot;Courier New&quot;;color:#008000">
<font size="3">/******************************************/</font></span></p>
<p class="MsoNormal" style="margin:0; ">
<span style="font-family:&quot;Courier New&quot;;color:#008000">
<font size="3">/* get a socket descriptor */</font></span></p>
<p class="MsoNormal" style="margin:0; ">
<span style="font-family:&quot;Courier New&quot;;color:blue">
<font size="3">if((sd = socket(AF_INET, SOCK_STREAM, 0)) &lt; 0)</font></span></p>
<p class="MsoNormal" style="margin:0; ">
<span style="font-family:&quot;Courier New&quot;;color:blue">
<font size="3">{</font></span></p>
<p class="MsoNormal" style="margin:0; ">
<span style="font-family:&quot;Courier New&quot;;color:blue">
<font size="3">perror("Client-socket() error");</font></span></p>
<p class="MsoNormal" style="margin:0; ">
<span style="font-family:&quot;Courier New&quot;;color:blue">
<font size="3">exit(-1);</font></span></p>
<p class="MsoNormal" style="margin:0; ">
<span style="font-family:&quot;Courier New&quot;;color:blue">
<font size="3">}</font></span></p>
<p class="MsoNormal" style="margin:0; ">
<span style="font-family:&quot;Courier New&quot;;color:blue">
<font size="3">else</font></span></p>
<p class="MsoNormal" style="margin:0; ">
<span style="font-family:&quot;Courier New&quot;;color:blue">
<font size="3">printf("Client-socket() OK\n");</font></span></p>
<p class="MsoNormal" style="margin:0; ">
<span style="font-family:&quot;Courier New&quot;;color:#008000">
<font size="3">/*If the server hostname is supplied*/</font></span></p>
<p class="MsoNormal" style="margin:0; ">
<span style="font-family:&quot;Courier New&quot;;color:blue">
<font size="3">if(argc &gt; 1)</font></span></p>
<p class="MsoNormal" style="margin:0; ">
<span style="font-family:&quot;Courier New&quot;;color:blue">
<font size="3">{</font></span></p>
<p class="MsoNormal" style="margin:0; ">
<span style="font-family:&quot;Courier New&quot;;color:#008000">
<font size="3">/*Use the supplied argument*/</font></span></p>
<p class="MsoNormal" style="margin:0; ">
<span style="font-family:&quot;Courier New&quot;;color:blue">
<font size="3">strcpy(server, argv[1]);</font></span></p>
<p class="MsoNormal" style="margin:0; ">
<span style="font-family:&quot;Courier New&quot;;color:blue">
<font size="3">printf("Connecting to the f***ing %s, port %d ...\n", server, 
SERVPORT);</font></span></p>
<p class="MsoNormal" style="margin:0; ">
<span style="font-family:&quot;Courier New&quot;;color:blue">
<font size="3">}</font></span></p>
<p class="MsoNormal" style="margin:0; ">
<span style="font-family:&quot;Courier New&quot;;color:blue">
<font size="3">else</font></span></p>
<p class="MsoNormal" style="margin:0; ">
<span style="font-family:&quot;Courier New&quot;;color:#008000">
<font size="3">/*Use the default server name or IP*/</font></span></p>
<p class="MsoNormal" style="margin:0; ">
<span style="font-family:&quot;Courier New&quot;;color:blue">
<font size="3">strcpy(server, SERVER);</font></span></p>
<p class="MsoNormal" style="margin:0; ">&nbsp;</p>
<p class="MsoNormal" style="margin:0; ">
<span style="font-family:&quot;Courier New&quot;;color:blue">
<font size="3">memset(&amp;serveraddr, 0x00, sizeof(struct sockaddr_in));</font></span></p>
<p class="MsoNormal" style="margin:0; ">
<span style="font-family:&quot;Courier New&quot;;color:blue">
<font size="3">serveraddr.sin_family = AF_INET;</font></span></p>
<p class="MsoNormal" style="margin:0; ">
<span style="font-family:&quot;Courier New&quot;;color:blue">
<font size="3">serveraddr.sin_port = htons(SERVPORT);</font></span></p>
<p class="MsoNormal" style="margin:0; ">&nbsp;</p>
<p class="MsoNormal" style="margin:0; ">
<span style="font-family:&quot;Courier New&quot;;color:blue">
<font size="3">if((serveraddr.sin_addr.s_addr = inet_addr(server)) == (unsigned 
long)INADDR_NONE)</font></span></p>
<p class="MsoNormal" style="margin:0; ">
<span style="font-family:&quot;Courier New&quot;;color:blue">
<font size="3">{</font></span></p>
<p class="MsoNormal" style="margin:0; ">&nbsp;</p>
<p class="MsoNormal" style="margin:0; ">
<span style="font-family:&quot;Courier New&quot;;color:#008000">
<font size="3">/* When passing the host name of the server as a */</font></span></p>
<p class="MsoNormal" style="margin:0; ">
<span style="font-family:&quot;Courier New&quot;;color:#008000">
<font size="3">/* parameter to this program, use the gethostbyname() */</font></span></p>
<p class="MsoNormal" style="margin:0; ">
<span style="font-family:&quot;Courier New&quot;;color:#008000">
<font size="3">/* function to retrieve the address of the host server. */</font></span></p>
<p class="MsoNormal" style="margin:0; ">
<span style="font-family:&quot;Courier New&quot;;color:#008000">
<font size="3">/***************************************************/</font></span></p>
<p class="MsoNormal" style="margin:0; ">
<span style="font-family:&quot;Courier New&quot;;color:#008000">
<font size="3">/* get host address */</font></span></p>
<p class="MsoNormal" style="margin:0; ">
<span style="font-family:&quot;Courier New&quot;;color:blue">
<font size="3">hostp = gethostbyname(server);</font></span></p>
<p class="MsoNormal" style="margin:0; ">
<span style="font-family:&quot;Courier New&quot;;color:blue">
<font size="3">if(hostp == (struct hostent *)NULL)</font></span></p>
<p class="MsoNormal" style="margin:0; ">
<span style="font-family:&quot;Courier New&quot;;color:blue">
<font size="3">{</font></span></p>
<p class="MsoNormal" style="margin:0; ">
<span style="font-family:&quot;Courier New&quot;;color:blue">
<font size="3">printf("HOST NOT FOUND --&gt; ");</font></span></p>
<p class="MsoNormal" style="margin:0; ">
<span style="font-family:&quot;Courier New&quot;;color:#008000">
<font size="3">/* h_errno is usually defined */</font></span></p>
<p class="MsoNormal" style="margin:0; ">
<span style="font-family:&quot;Courier New&quot;;color:#008000" lang="DE">
<font size="3">/* in netdb.h */</font></span></p>
<p class="MsoNormal" style="margin:0; ">
<span style="font-family:&quot;Courier New&quot;;color:blue" lang="DE">
<font size="3">printf("h_errno = %d\n",h_errno);</font></span></p>
<p class="MsoNormal" style="margin:0; ">
<span style="font-family:&quot;Courier New&quot;;color:blue">
<font size="3">printf("---This is a client program---\n");</font></span></p>
<p class="MsoNormal" style="margin:0; ">
<span style="font-family:&quot;Courier New&quot;;color:blue">
<font size="3">printf("Command usage: %s &lt;server name or IP&gt;\n", argv[0]);</font></span></p>
<p class="MsoNormal" style="margin:0; ">
<span style="font-family:&quot;Courier New&quot;;color:blue">
<font size="3">close(sd);</font></span></p>
<p class="MsoNormal" style="margin:0; ">
<span style="font-family:&quot;Courier New&quot;;color:blue">
<font size="3">exit(-1);</font></span></p>
<p class="MsoNormal" style="margin:0; ">
<span style="font-family:&quot;Courier New&quot;;color:blue">
<font size="3">}</font></span></p>
<p class="MsoNormal" style="margin:0; ">
<span style="font-family:&quot;Courier New&quot;;color:blue">
<font size="3">memcpy(&amp;serveraddr.sin_addr, hostp-&gt;h_addr, sizeof(serveraddr.sin_addr));</font></span></p>
<p class="MsoNormal" style="margin:0; ">
<span style="font-family:&quot;Courier New&quot;;color:blue">
<font size="3">}</font></span></p>
<p class="MsoNormal" style="margin:0; ">&nbsp;</p>
<p class="MsoNormal" style="margin:0; ">
<span style="font-family:&quot;Courier New&quot;;color:#008000">
<font size="3">/* After the socket descriptor is received, the */</font></span></p>
<p class="MsoNormal" style="margin:0; ">
<span style="font-family:&quot;Courier New&quot;;color:#008000">
<font size="3">/* connect() function is used to establish a */</font></span></p>
<p class="MsoNormal" style="margin:0; ">
<span style="font-family:&quot;Courier New&quot;;color:#008000">
<font size="3">/* connection to the server. */</font></span></p>
<p class="MsoNormal" style="margin:0; ">
<span style="font-family:&quot;Courier New&quot;;color:#008000">
<font size="3">/***********************************************/</font></span></p>
<p class="MsoNormal" style="margin:0; ">
<span style="font-family:&quot;Courier New&quot;;color:#008000">
<font size="3">/* connect() to server. */</font></span></p>
<p class="MsoNormal" style="margin:0; ">
<span style="font-family:&quot;Courier New&quot;;color:blue">
<font size="3">if((rc = connect(sd, (struct sockaddr *)&amp;serveraddr, sizeof(serveraddr))) 
&lt; 0)</font></span></p>
<p class="MsoNormal" style="margin:0; ">
<span style="font-family:&quot;Courier New&quot;;color:blue">
<font size="3">{</font></span></p>
<p class="MsoNormal" style="margin:0; ">
<span style="font-family:&quot;Courier New&quot;;color:blue">
<font size="3">perror("Client-connect() error");</font></span></p>
<p class="MsoNormal" style="margin:0; ">
<span style="font-family:&quot;Courier New&quot;;color:blue">
<font size="3">close(sd);</font></span></p>
<p class="MsoNormal" style="margin:0; ">
<span style="font-family:&quot;Courier New&quot;;color:blue">
<font size="3">exit(-1);</font></span></p>
<p class="MsoNormal" style="margin:0; ">
<span style="font-family:&quot;Courier New&quot;;color:blue">
<font size="3">}</font></span></p>
<p class="MsoNormal" style="margin:0; ">
<span style="font-family:&quot;Courier New&quot;;color:blue">
<font size="3">else</font></span></p>
<p class="MsoNormal" style="margin:0; ">
<span style="font-family:&quot;Courier New&quot;;color:blue">
<font size="3">printf("Connection established...\n");</font></span></p>
<p class="MsoNormal" style="margin:0; ">&nbsp;</p>
<p class="MsoNormal" style="margin:0; ">
<span style="font-family:&quot;Courier New&quot;;color:#008000">
<font size="3">/* Send string to the server using */</font></span></p>
<p class="MsoNormal" style="margin:0; ">
<span style="font-family:&quot;Courier New&quot;;color:#008000">
<font size="3">/* the write() function. */</font></span></p>
<p class="MsoNormal" style="margin:0; ">
<span style="font-family:&quot;Courier New&quot;;color:#008000">
<font size="3">/*********************************************/</font></span></p>
<p class="MsoNormal" style="margin:0; ">
<span style="font-family:&quot;Courier New&quot;;color:#008000">
<font size="3">/* Write() some string to the server. */</font></span></p>
<p class="MsoNormal" style="margin:0; ">
<span style="font-family:&quot;Courier New&quot;;color:blue">
<font size="3">printf("Sending some string to the f***ing %s...\n", server);</font></span></p>
<p class="MsoNormal" style="margin:0; ">
<span style="font-family:&quot;Courier New&quot;;color:blue">
<font size="3">rc = write(sd, data, sizeof(data));</font></span></p>
<p class="MsoNormal" style="margin:0; ">&nbsp;</p>
<p class="MsoNormal" style="margin:0; ">
<span style="font-family:&quot;Courier New&quot;;color:blue">
<font size="3">if(rc &lt; 0)</font></span></p>
<p class="MsoNormal" style="margin:0; ">
<span style="font-family:&quot;Courier New&quot;;color:blue">
<font size="3">{</font></span></p>
<p class="MsoNormal" style="margin:0; ">
<span style="font-family:&quot;Courier New&quot;;color:blue">
<font size="3">perror("Client-write() error");</font></span></p>
<p class="MsoNormal" style="margin:0; ">
<span style="font-family:&quot;Courier New&quot;;color:blue">
<font size="3">rc = getsockopt(sd, SOL_SOCKET, SO_ERROR, &amp;temp, &amp;length);</font></span></p>
<p class="MsoNormal" style="margin:0; ">
<span style="font-family:&quot;Courier New&quot;;color:blue">
<font size="3">if(rc == 0)</font></span></p>
<p class="MsoNormal" style="margin:0; ">
<span style="font-family:&quot;Courier New&quot;;color:blue">
<font size="3">{</font></span></p>
<p class="MsoNormal" style="margin:0; ">
<span style="font-family:&quot;Courier New&quot;;color:#008000">
<font size="3">/* Print out the asynchronously received error. */</font></span></p>
<p class="MsoNormal" style="margin:0; ">
<span style="font-family:&quot;Courier New&quot;;color:blue">
<font size="3">errno = temp;</font></span></p>
<p class="MsoNormal" style="margin:0; ">
<span style="font-family:&quot;Courier New&quot;;color:blue">
<font size="3">perror("SO_ERROR was");</font></span></p>
<p class="MsoNormal" style="margin:0; ">
<span style="font-family:&quot;Courier New&quot;;color:blue">
<font size="3">}</font></span></p>
<p class="MsoNormal" style="margin:0; ">
<span style="font-family:&quot;Courier New&quot;;color:blue">
<font size="3">close(sd);</font></span></p>
<p class="MsoNormal" style="margin:0; ">
<span style="font-family:&quot;Courier New&quot;;color:blue">
<font size="3">exit(-1);</font></span></p>
<p class="MsoNormal" style="margin:0; ">
<span style="font-family:&quot;Courier New&quot;;color:blue">
<font size="3">}</font></span></p>
<p class="MsoNormal" style="margin:0; ">
<span style="font-family:&quot;Courier New&quot;;color:blue">
<font size="3">else</font></span></p>
<p class="MsoNormal" style="margin:0; ">
<span style="font-family:&quot;Courier New&quot;;color:blue">
<font size="3">{</font></span></p>
<p class="MsoNormal" style="margin:0; ">
<span style="font-family:&quot;Courier New&quot;;color:blue">
<font size="3">printf("Client-write() is OK\n");</font></span></p>
<p class="MsoNormal" style="margin:0; ">
<span style="font-family:&quot;Courier New&quot;;color:blue">
<font size="3">printf("String successfully sent lol!\n");</font></span></p>
<p class="MsoNormal" style="margin:0; ">
<span style="font-family:&quot;Courier New&quot;;color:blue">
<font size="3">printf("Waiting the %s to echo back...\n", server);</font></span></p>
<p class="MsoNormal" style="margin:0; ">
<span style="font-family:&quot;Courier New&quot;;color:blue">
<font size="3">}</font></span></p>
<p class="MsoNormal" style="margin:0; ">&nbsp;</p>
<p class="MsoNormal" style="margin:0; ">
<span style="font-family:&quot;Courier New&quot;;color:blue">
<font size="3">totalcnt = 0;</font></span></p>
<p class="MsoNormal" style="margin:0; ">
<span style="font-family:&quot;Courier New&quot;;color:blue">
<font size="3">while(totalcnt &lt; BufferLength)</font></span></p>
<p class="MsoNormal" style="margin:0; ">
<span style="font-family:&quot;Courier New&quot;;color:blue">
<font size="3">{</font></span></p>
<p class="MsoNormal" style="margin:0; ">&nbsp;</p>
<p class="MsoNormal" style="margin:0; ">
<span style="font-family:&quot;Courier New&quot;;color:#008000">
<font size="3">/* Wait for the server to echo the */</font></span></p>
<p class="MsoNormal" style="margin:0; ">
<span style="font-family:&quot;Courier New&quot;;color:#008000">
<font size="3">/* string by using the read() function. */</font></span></p>
<p class="MsoNormal" style="margin:0; ">
<span style="font-family:&quot;Courier New&quot;;color:#008000">
<font size="3">/***************************************/</font></span></p>
<p class="MsoNormal" style="margin:0; ">
<span style="font-family:&quot;Courier New&quot;;color:#008000">
<font size="3">/* Read data from the server. */</font></span></p>
<p class="MsoNormal" style="margin:0; ">
<span style="font-family:&quot;Courier New&quot;;color:blue">
<font size="3">rc = read(sd, &amp;buffer[totalcnt], BufferLength-totalcnt);</font></span></p>
<p class="MsoNormal" style="margin:0; ">
<span style="font-family:&quot;Courier New&quot;;color:blue">
<font size="3">if(rc &lt; 0)</font></span></p>
<p class="MsoNormal" style="margin:0; ">
<span style="font-family:&quot;Courier New&quot;;color:blue">
<font size="3">{</font></span></p>
<p class="MsoNormal" style="margin:0; ">
<span style="font-family:&quot;Courier New&quot;;color:blue">
<font size="3">perror("Client-read() error");</font></span></p>
<p class="MsoNormal" style="margin:0; ">
<span style="font-family:&quot;Courier New&quot;;color:blue">
<font size="3">close(sd);</font></span></p>
<p class="MsoNormal" style="margin:0; ">
<span style="font-family:&quot;Courier New&quot;;color:blue">
<font size="3">exit(-1);</font></span></p>
<p class="MsoNormal" style="margin:0; ">
<span style="font-family:&quot;Courier New&quot;;color:blue">
<font size="3">}</font></span></p>
<p class="MsoNormal" style="margin:0; ">
<span style="font-family:&quot;Courier New&quot;;color:blue">
<font size="3">else if (rc == 0)</font></span></p>
<p class="MsoNormal" style="margin:0; ">
<span style="font-family:&quot;Courier New&quot;;color:blue">
<font size="3">{</font></span></p>
<p class="MsoNormal" style="margin:0; ">
<span style="font-family:&quot;Courier New&quot;;color:blue">
<font size="3">printf("Server program has issued a close()\n");</font></span></p>
<p class="MsoNormal" style="margin:0; ">
<span style="font-family:&quot;Courier New&quot;;color:blue">
<font size="3">close(sd);</font></span></p>
<p class="MsoNormal" style="margin:0; ">
<span style="font-family:&quot;Courier New&quot;;color:blue">
<font size="3">exit(-1);</font></span></p>
<p class="MsoNormal" style="margin:0; ">
<span style="font-family:&quot;Courier New&quot;;color:blue">
<font size="3">}</font></span></p>
<p class="MsoNormal" style="margin:0; ">
<span style="font-family:&quot;Courier New&quot;;color:blue">
<font size="3">else</font></span></p>
<p class="MsoNormal" style="margin:0; ">
<span style="font-family:&quot;Courier New&quot;;color:blue">
<font size="3">totalcnt += rc;</font></span></p>
<p class="MsoNormal" style="margin:0; ">
<span style="font-family:&quot;Courier New&quot;;color:blue">
<font size="3">}</font></span></p>
<p class="MsoNormal" style="margin:0; ">
<span style="font-family:&quot;Courier New&quot;;color:blue">
<font size="3">printf("Client-read() is OK\n");</font></span></p>
<p class="MsoNormal" style="margin:0; ">
<span style="font-family:&quot;Courier New&quot;;color:blue">
<font size="3">printf("Echoed data from the f***ing server: %s\n", buffer);</font></span></p>
<p class="MsoNormal" style="margin:0; ">&nbsp;</p>
<p class="MsoNormal" style="margin:0; ">
<span style="font-family:&quot;Courier New&quot;;color:#008000">
<font size="3">/* When the data has been read, close() */</font></span></p>
<p class="MsoNormal" style="margin:0; ">
<span style="font-family:&quot;Courier New&quot;;color:#008000">
<font size="3">/* the socket descriptor. */</font></span></p>
<p class="MsoNormal" style="margin:0; ">
<span style="font-family:&quot;Courier New&quot;;color:#008000">
<font size="3">/****************************************/</font></span></p>
<p class="MsoNormal" style="margin:0; ">
<span style="font-family:&quot;Courier New&quot;;color:#008000">
<font size="3">/* Close socket descriptor from client side. */</font></span></p>
<p class="MsoNormal" style="margin:0; ">
<span style="font-family:&quot;Courier New&quot;;color:blue">
<font size="3">close(sd);</font></span></p>
<p class="MsoNormal" style="margin:0; ">
<span style="font-family:&quot;Courier New&quot;;color:blue">
<font size="3">exit(0);</font></span></p>
<p class="MsoNormal" style="margin:0; ">
<span style="font-family:&quot;Courier New&quot;;color:blue">
<font size="3">return 0;</font></span></p>
<p class="MsoNormal" style="margin:0; ">
<span style="font-family:&quot;Courier New&quot;;color:blue">
<font size="3">}</font></span></p>
</blockquote>
<ul type="square">
<li>
<p style="margin-top: 0; margin-bottom: 0"><font face="Arial">Compile and 
link the client program.</font></p>
</li>
</ul>
<blockquote>
<p class="MsoNormal" style="margin:0; ">
<span style="font-family:&quot;Courier New&quot;"><font size="3">[bodo@bakawali 
testsocket]$ <font color="#FF0000">gcc -g tcpclient.c -o tcpclient</font></font></span></p>
</blockquote>
<ul type="square">
<li>
<p style="margin-top: 0; margin-bottom: 0"><font face="Arial">Run the program.&nbsp; 
Before that don’t forget to run the server program first.&nbsp; The first 
run is without the server hostname/IP.</font></p>
</li>
</ul>
<blockquote>
<p class="MsoNormal" style="margin:0; ">
<span style="font-family:&quot;Courier New&quot;"><font size="3">[bodo@bakawali 
testsocket]$ <font color="#FF0000">./tcpclient</font></font></span></p>
<p class="MsoNormal" style="margin:0; ">
<span style="font-family:&quot;Courier New&quot;;color:#993300">
<font size="3">Client-socket() OK</font></span></p>
<p class="MsoNormal" style="margin:0; ">
<span style="font-family:&quot;Courier New&quot;;color:#993300">
<font size="3">HOST NOT FOUND --&gt; h_errno = 1</font></span></p>
<p class="MsoNormal" style="margin:0; ">
<span style="font-family:&quot;Courier New&quot;;color:#993300">
<font size="3">---This is a client program---</font></span></p>
<p class="MsoNormal" style="margin:0; ">
<span style="font-family:&quot;Courier New&quot;;color:#993300">
<font size="3">Command usage: ./tcpclient &lt;server name or IP&gt;</font></span></p>
<p class="MsoNormal" style="margin:0; ">
<span style="font-family:&quot;Courier New&quot;"><font size="3">[bodo@bakawali 
testsocket]$</font></span></p>
</blockquote>
<ul type="square">
<li>
<p style="margin-top: 0; margin-bottom: 0"><font face="Arial">Then run with 
the server hostname or IP.</font></p>
</li>
</ul>
<blockquote>
<p class="MsoNormal" style="margin:0; ">
<span style="font-family:&quot;Courier New&quot;"><font size="3">[bodo@bakawali 
testsocket]$ <font color="#FF0000">./tcpclient 203.106.93.94</font></font></span></p>
<p class="MsoNormal" style="margin:0; ">
<span style="font-family:&quot;Courier New&quot;;color:#993300">
<font size="3">Client-socket() OK</font></span></p>
<p class="MsoNormal" style="margin:0; ">
<span style="font-family:&quot;Courier New&quot;;color:#993300">
<font size="3">Connecting to the f***ing 203.106.93.94, port 3111 ...</font></span></p>
<p class="MsoNormal" style="margin:0; ">
<span style="font-family:&quot;Courier New&quot;;color:#993300">
<font size="3">Connection established...</font></span></p>
<p class="MsoNormal" style="margin:0; ">
<span style="font-family:&quot;Courier New&quot;;color:#993300">
<font size="3">Sending some string to the f***ing 203.106.93.94...</font></span></p>
<p class="MsoNormal" style="margin:0; ">
<span style="font-family:&quot;Courier New&quot;;color:#993300">
<font size="3">Client-write() is OK</font></span></p>
<p class="MsoNormal" style="margin:0; ">
<span style="font-family:&quot;Courier New&quot;;color:#993300">
<font size="3">String successfully sent lol!</font></span></p>
<p class="MsoNormal" style="margin:0; ">
<span style="font-family:&quot;Courier New&quot;;color:#993300">
<font size="3">Waiting the 203.106.93.94 to echo back...</font></span></p>
<p class="MsoNormal" style="margin:0; ">
<span style="font-family:&quot;Courier New&quot;;color:#993300">
<font size="3">Client-read() is OK</font></span></p>
<p class="MsoNormal" style="margin:0; ">
<span style="font-family:&quot;Courier New&quot;;color:#993300">
<font size="3">Echoed data from the f***ing server: This is a test string 
from client lol!!!</font></span></p>
<p class="MsoNormal" style="margin:0; ">
<span style="font-family:&quot;Courier New&quot;"><font size="3">[bodo@bakawali 
testsocket]$</font></span></p>
</blockquote>
<ul type="square">
<li>
<p style="margin-top: 0; margin-bottom: 0"><font face="Arial">And at the 
server console messages.</font></p>
</li>
</ul>
<blockquote>
<p class="MsoNormal" style="margin:0; ">
<span style="font-family:&quot;Courier New&quot;"><font size="3">[bodo@bakawali 
testsocket]$ <font color="#FF0000">./tcpserver</font></font></span></p>
<p class="MsoNormal" style="margin:0; ">
<span style="font-family:&quot;Courier New&quot;;color:#993300">
<font size="3">Server-socket() is OK</font></span></p>
<p class="MsoNormal" style="margin:0; ">
<span style="font-family:&quot;Courier New&quot;;color:#993300">
<font size="3">Server-setsockopt() is OK</font></span></p>
<p class="MsoNormal" style="margin:0; ">
<span style="font-family:&quot;Courier New&quot;;color:#993300">
<font size="3">Using 0.0.0.0, listening at 3111</font></span></p>
<p class="MsoNormal" style="margin:0; ">
<span style="font-family:&quot;Courier New&quot;;color:#993300">
<font size="3">Server-bind() is OK</font></span></p>
<p class="MsoNormal" style="margin:0; ">
<span style="font-family:&quot;Courier New&quot;;color:#993300">
<font size="3">Server-Ready for client connection...</font></span></p>
<p class="MsoNormal" style="margin:0; ">
<span style="font-family:&quot;Courier New&quot;;color:#993300">
<font size="3">Server-accept() is OK</font></span></p>
<p class="MsoNormal" style="margin:0; ">
<span style="font-family:&quot;Courier New&quot;;color:#993300">
<font size="3">Server-new socket, sd2 is OK...</font></span></p>
<p class="MsoNormal" style="margin:0; ">
<span style="font-family:&quot;Courier New&quot;;color:#993300">
<font size="3">Got connection from the f***ing client: 203.106.93.94</font></span></p>
<p class="MsoNormal" style="margin:0; ">
<span style="font-family:&quot;Courier New&quot;;color:#993300">
<font size="3">Server-read() is OK</font></span></p>
<p class="MsoNormal" style="margin:0; ">
<span style="font-family:&quot;Courier New&quot;;color:#993300">
<font size="3">Received data from the f***ing client: This is a test string 
from client lol!!!</font></span></p>
<p class="MsoNormal" style="margin:0; ">
<span style="font-family:&quot;Courier New&quot;;color:#993300">
<font size="3">Server-Echoing back to client...</font></span></p>
<p class="MsoNormal" style="margin:0; ">
<span style="font-family:&quot;Courier New&quot;"><font size="3">[bodo@bakawali 
testsocket]$</font></span></p>
</blockquote>
<ul type="square">
<li>
<p style="margin-top: 0; margin-bottom: 0"><font face="Arial">Well, it works!</font></p>
</li>
</ul>
<p class="MsoNormal" style="text-autospace:none; margin-top:0; margin-bottom:0">
<b><span style="font-family:Arial"><font size="3">UDP connectionless client/server</font></span></b></p>
<ul type="square">
<li>
<p style="text-autospace:
none; margin-top:0; margin-bottom:0"><font face="Arial">The connectionless protocol 
server and client examples illustrate the socket APIs that are written for 
User Datagram Protocol (UDP).&nbsp; The server and client examples use the 
following sequence of function calls:</font></p>
</li>
</ul>
<blockquote>
<ol>
<li>
<p style="margin-top: 0; margin-bottom: 0"><font face="Arial">socket()</font></p>
</li>
<li>
<p style="margin-top: 0; margin-bottom: 0"><font face="Arial">bind()</font></p>
</li>
</ol>
</blockquote>
<ul type="square">
<li>
<p style="text-autospace:
none; margin-top:0; margin-bottom:0"><font face="Arial">The following figure illustrates 
the client/server relationship of the socket APIs for a connectionless protocol.</font></p>
</li>
</ul>
<table id="table2" width="100%" border="0">
<tbody>
<tr>
<td align="center">
<p style="margin-top: 0; margin-bottom: 0">
<font size="3" face="Arial">
<img src="The%20Linux%20socket%20and%20network%20TCP%20client-server%20C%20program%20example_files/image001.png" alt="UDP connectionless APIs" border="0"></font></p>
</td>
<td style="border-left: 2px solid #FF0000; border-right-width: 1px; border-top-width: 1px; border-bottom-width: 1px" align="center">
<script type="text/javascript"><!--
google_ad_client = "pub-8089415323104206";
/* 300x250, created 6/1/08linsoc */
google_ad_slot = "6424101484";
google_ad_width = 300;
google_ad_height = 250;
//-->
</script>
<script type="text/javascript" src="The%20Linux%20socket%20and%20network%20TCP%20client-server%20C%20program%20example_files/show_ads.js">
			
</script><ins style="display:inline-table;border:none;height:250px;margin:0;padding:0;position:relative;visibility:visible;width:300px;background-color:transparent"><ins id="aswift_1_anchor" style="display:block;border:none;height:250px;margin:0;padding:0;position:relative;visibility:visible;width:300px;background-color:transparent"><iframe marginwidth="0" marginheight="0" vspace="0" hspace="0" allowtransparency="true" onload="var i=this.id,s=window.google_iframe_oncopy,H=s&amp;&amp;s.handlers,h=H&amp;&amp;H[i],w=this.contentWindow,d;try{d=w.document}catch(e){}if(h&amp;&amp;d&amp;&amp;(!d.body||!d.body.firstChild)){if(h.call){setTimeout(h,0)}else if(h.match){try{h=s.upd(h,i)}catch(e){}w.location.replace(h)}}" id="aswift_1" name="aswift_1" style="left:0;position:absolute;top:0;" width="300" frameborder="0" height="250" scrolling="no"></iframe></ins></ins>
</td>
</tr>
</tbody>
</table>
<p class="MsoNormal" style="margin-top: 0; margin-bottom: 0">&nbsp;</p>
<p class="MsoNormal" style="text-align:center; margin-top:0; margin-bottom:0" align="center">
<font size="3" face="Arial">Figure 1: UDP connectionless APIs relationship.</font></p>
<p class="MsoNormal" style="margin-top: 0; margin-bottom: 0">&nbsp;</p>
<p class="MsoNormal" style="text-autospace:none; margin-top:0; margin-bottom:0">
<b><span style="font-family:Arial"><font size="3">Connecting a UDP server and 
client</font></span></b></p>
<ul type="square">
<li>
<p style="text-autospace:
none; margin-top:0; margin-bottom:0"><font face="Arial">The following examples show 
how to use UDP to connect a server to a connectionless client, and a connectionless 
client to a server.</font></p>
</li>
</ul>
<p class="MsoNormal" style="text-autospace:none; margin-top:0; margin-bottom:0">
<b><span style="font-family:Arial"><font size="3">Example: Connecting a UDP 
server to a client, a server program</font></span></b></p>
<ul type="square">
<li>
<p style="text-autospace:
none; margin-top:0; margin-bottom:0"><font face="Arial">The first example shows 
how to use UDP to connect a connectionless server socket program to a client.</font></p>
</li>
</ul>
<blockquote>
<p class="MsoNormal" style="margin:0; text-autospace:none">
<span style="font-family:&quot;Courier New&quot;;color:#008000">
<font size="3">/*******************udpserver.c*****************/</font></span></p>
<p class="MsoNormal" style="margin:0; text-autospace:none">
<span style="font-family:&quot;Courier New&quot;;color:#008000">
<font size="3">/* Header files needed to use the sockets API. */</font></span></p>
<p class="MsoNormal" style="margin:0; text-autospace:none">
<span style="font-family:&quot;Courier New&quot;;color:#008000">
<font size="3">/* File contain Macro, Data Type and Structure */</font></span></p>
<p class="MsoNormal" style="margin:0; text-autospace:none">
<span style="font-family:&quot;Courier New&quot;;color:#008000">
<font size="3">/* definitions along with Function prototypes. */</font></span></p>
<p class="MsoNormal" style="margin:0; text-autospace:none">
<span style="font-family:&quot;Courier New&quot;;color:#008000">
<font size="3">/* header files */</font></span></p>
<p class="MsoNormal" style="margin:0; text-autospace:none">
<span style="font-family:&quot;Courier New&quot;;color:blue">
<font size="3">#include &lt;stdio.h&gt;</font></span></p>
<p class="MsoNormal" style="margin:0; text-autospace:none">
<span style="font-family:&quot;Courier New&quot;;color:blue">
<font size="3">#include &lt;stdlib.h&gt;</font></span></p>
<p class="MsoNormal" style="margin:0; text-autospace:none">
<span style="font-family:&quot;Courier New&quot;;color:blue">
<font size="3">#include &lt;string.h&gt;</font></span></p>
<p class="MsoNormal" style="margin:0; text-autospace:none">
<span style="font-family:&quot;Courier New&quot;;color:blue">
<font size="3">#include &lt;sys/types.h&gt;</font></span></p>
<p class="MsoNormal" style="margin:0; text-autospace:none">
<span style="font-family:&quot;Courier New&quot;;color:blue">
<font size="3">#include &lt;sys/socket.h&gt;</font></span></p>
<p class="MsoNormal" style="margin:0; text-autospace:none">
<span style="font-family:&quot;Courier New&quot;;color:blue">
<font size="3">#include &lt;netinet/in.h&gt;</font></span></p>
<p class="MsoNormal" style="margin:0; text-autospace:none">
<span style="font-family:&quot;Courier New&quot;;color:blue">
<font size="3">#include &lt;arpa/inet.h&gt;</font></span></p>
<p class="MsoNormal" style="margin:0; text-autospace:none">
<span style="font-family:&quot;Courier New&quot;;color:#008000">
<font size="3">/* Server's port number, listen at 3333 */</font></span></p>
<p class="MsoNormal" style="margin:0; text-autospace:none">
<span style="font-family:&quot;Courier New&quot;;color:blue">
<font size="3">#define SERVPORT 3333</font></span></p>
<p class="MsoNormal" style="margin:0; text-autospace:none">&nbsp;</p>
<p class="MsoNormal" style="margin:0; text-autospace:none">
<span style="font-family:&quot;Courier New&quot;;color:#008000">
<font size="3">/* Run the server without argument */</font></span></p>
<p class="MsoNormal" style="margin:0; text-autospace:none">
<span style="font-family:&quot;Courier New&quot;;color:blue">
<font size="3">int main(int argc, char *argv[])</font></span></p>
<p class="MsoNormal" style="margin:0; text-autospace:none">
<span style="font-family:&quot;Courier New&quot;;color:blue">
<font size="3">{</font></span></p>
<p class="MsoNormal" style="margin:0; text-autospace:none">
<span style="font-family:&quot;Courier New&quot;;color:#008000">
<font size="3">/* Variable and structure definitions. */</font></span></p>
<p class="MsoNormal" style="margin:0; text-autospace:none">
<span style="font-family:&quot;Courier New&quot;;color:blue">
<font size="3">int sd, rc;</font></span></p>
<p class="MsoNormal" style="margin:0; text-autospace:none">
<span style="font-family:&quot;Courier New&quot;;color:blue">
<font size="3">struct sockaddr_in serveraddr, clientaddr;</font></span></p>
<p class="MsoNormal" style="margin:0; text-autospace:none">
<span style="font-family:&quot;Courier New&quot;;color:blue">
<font size="3">int clientaddrlen = sizeof(clientaddr);</font></span></p>
<p class="MsoNormal" style="margin:0; text-autospace:none">
<span style="font-family:&quot;Courier New&quot;;color:blue">
<font size="3">int serveraddrlen = sizeof(serveraddr);</font></span></p>
<p class="MsoNormal" style="margin:0; text-autospace:none">
<span style="font-family:&quot;Courier New&quot;;color:blue">
<font size="3">char buffer[100];</font></span></p>
<p class="MsoNormal" style="margin:0; text-autospace:none">
<span style="font-family:&quot;Courier New&quot;;color:blue">
<font size="3">char *bufptr = buffer;</font></span></p>
<p class="MsoNormal" style="margin:0; text-autospace:none">
<span style="font-family:&quot;Courier New&quot;;color:blue">
<font size="3">int buflen = sizeof(buffer);</font></span></p>
<p class="MsoNormal" style="margin:0; text-autospace:none">&nbsp;</p>
<p class="MsoNormal" style="margin:0; text-autospace:none">
<span style="font-family:&quot;Courier New&quot;;color:#008000">
<font size="3">/* The socket() function returns a socket */</font></span></p>
<p class="MsoNormal" style="margin:0; text-autospace:none">
<span style="font-family:&quot;Courier New&quot;;color:#008000">
<font size="3">/* descriptor representing an endpoint. */</font></span></p>
<p class="MsoNormal" style="margin:0; text-autospace:none">
<span style="font-family:&quot;Courier New&quot;;color:#008000">
<font size="3">/* The statement also identifies that the */</font></span></p>
<p class="MsoNormal" style="margin:0; text-autospace:none">
<span style="font-family:&quot;Courier New&quot;;color:#008000">
<font size="3">/* INET (Internet Protocol) address family */</font></span></p>
<p class="MsoNormal" style="margin:0; text-autospace:none">
<span style="font-family:&quot;Courier New&quot;;color:#008000">
<font size="3">/* with the UDP transport (SOCK_DGRAM) will */</font></span></p>
<p class="MsoNormal" style="margin:0; text-autospace:none">
<span style="font-family:&quot;Courier New&quot;;color:#008000">
<font size="3">/* be used for this socket. */</font></span></p>
<p class="MsoNormal" style="margin:0; text-autospace:none">
<span style="font-family:&quot;Courier New&quot;;color:#008000">
<font size="3">/******************************************/</font></span></p>
<p class="MsoNormal" style="margin:0; text-autospace:none">
<span style="font-family:&quot;Courier New&quot;;color:#008000">
<font size="3">/* get a socket descriptor */</font></span></p>
<p class="MsoNormal" style="margin:0; text-autospace:none">
<span style="font-family:&quot;Courier New&quot;;color:blue">
<font size="3">if((sd = socket(AF_INET, SOCK_DGRAM, 0)) &lt; 0)</font></span></p>
<p class="MsoNormal" style="margin:0; text-autospace:none">
<span style="font-family:&quot;Courier New&quot;;color:blue">
<font size="3">{</font></span></p>
<p class="MsoNormal" style="margin:0; text-autospace:none">
<span style="font-family:&quot;Courier New&quot;;color:blue">
<font size="3">perror("UDP server - socket() error");</font></span></p>
<p class="MsoNormal" style="margin:0; text-autospace:none">
<span style="font-family:&quot;Courier New&quot;;color:blue">
<font size="3">exit(-1);</font></span></p>
<p class="MsoNormal" style="margin:0; text-autospace:none">
<span style="font-family:&quot;Courier New&quot;;color:blue">
<font size="3">}</font></span></p>
<p class="MsoNormal" style="margin:0; text-autospace:none">
<span style="font-family:&quot;Courier New&quot;;color:blue">
<font size="3">else</font></span></p>
<p class="MsoNormal" style="margin:0; text-autospace:none">
<span style="font-family:&quot;Courier New&quot;;color:blue">
<font size="3">printf("UDP server - socket() is OK\n");</font></span></p>
<p class="MsoNormal" style="margin:0; text-autospace:none">
<span style="font-family:&quot;Courier New&quot;;color:blue">
<font size="3">&nbsp;</font></span></p>
<p class="MsoNormal" style="margin:0; text-autospace:none">
<span style="font-family:&quot;Courier New&quot;;color:blue">
<font size="3">printf("UDP server - try to bind...\n");</font></span></p>
<p class="MsoNormal" style="margin:0; text-autospace:none">&nbsp;</p>
<p class="MsoNormal" style="margin:0; text-autospace:none">
<span style="font-family:&quot;Courier New&quot;;color:#008000">
<font size="3">/* After the socket descriptor is received, */</font></span></p>
<p class="MsoNormal" style="margin:0; text-autospace:none">
<span style="font-family:&quot;Courier New&quot;;color:#008000">
<font size="3">/* a bind() is done to assign a unique name */</font></span></p>
<p class="MsoNormal" style="margin:0; text-autospace:none">
<span style="font-family:&quot;Courier New&quot;;color:#008000">
<font size="3">/* to the socket. In this example, the user */</font></span></p>
<p class="MsoNormal" style="margin:0; text-autospace:none">
<span style="font-family:&quot;Courier New&quot;;color:#008000">
<font size="3">/* set the s_addr to zero. This allows the */</font></span></p>
<p class="MsoNormal" style="margin:0; text-autospace:none">
<span style="font-family:&quot;Courier New&quot;;color:#008000">
<font size="3">/* system to connect to any client that uses */</font></span></p>
<p class="MsoNormal" style="margin:0; text-autospace:none">
<span style="font-family:&quot;Courier New&quot;;color:#008000">
<font size="3">/* port 3333. */</font></span></p>
<p class="MsoNormal" style="margin:0; text-autospace:none">
<span style="font-family:&quot;Courier New&quot;;color:#008000">
<font size="3">/********************************************/</font></span></p>
<p class="MsoNormal" style="margin:0; text-autospace:none">
<span style="font-family:&quot;Courier New&quot;;color:#008000">
<font size="3">/* bind to address */</font></span></p>
<p class="MsoNormal" style="margin:0; text-autospace:none">
<span style="font-family:&quot;Courier New&quot;;color:blue">
<font size="3">memset(&amp;serveraddr, 0x00, serveraddrlen);</font></span></p>
<p class="MsoNormal" style="margin:0; text-autospace:none">
<span style="font-family:&quot;Courier New&quot;;color:blue">
<font size="3">serveraddr.sin_family = AF_INET;</font></span></p>
<p class="MsoNormal" style="margin:0; text-autospace:none">
<span style="font-family:&quot;Courier New&quot;;color:blue">
<font size="3">serveraddr.sin_port = htons(SERVPORT);</font></span></p>
<p class="MsoNormal" style="margin:0; text-autospace:none">
<span style="font-family:&quot;Courier New&quot;;color:blue">
<font size="3">serveraddr.sin_addr.s_addr = htonl(INADDR_ANY);</font></span></p>
<p class="MsoNormal" style="margin:0; text-autospace:none">
<span style="font-family:&quot;Courier New&quot;;color:blue">
<font size="3">if((rc = bind(sd, (struct sockaddr *)&amp;serveraddr, serveraddrlen)) 
&lt; 0)</font></span></p>
<p class="MsoNormal" style="margin:0; text-autospace:none">
<span style="font-family:&quot;Courier New&quot;;color:blue">
<font size="3">{</font></span></p>
<p class="MsoNormal" style="margin:0; text-autospace:none">
<span style="font-family:&quot;Courier New&quot;;color:blue" lang="DA">
<font size="3">perror("UDP server - bind() error");</font></span></p>
<p class="MsoNormal" style="margin:0; text-autospace:none">
<span style="font-family:&quot;Courier New&quot;;color:blue">
<font size="3">close(sd);</font></span></p>
<p class="MsoNormal" style="margin:0; text-autospace:none">
<span style="font-family:&quot;Courier New&quot;;color:blue">
<font size="3">/* If something wrong with socket(), just exit lol */</font></span></p>
<p class="MsoNormal" style="margin:0; text-autospace:none">
<span style="font-family:&quot;Courier New&quot;;color:blue">
<font size="3">exit(-1);</font></span></p>
<p class="MsoNormal" style="margin:0; text-autospace:none">
<span style="font-family:&quot;Courier New&quot;;color:blue">
<font size="3">}</font></span></p>
<p class="MsoNormal" style="margin:0; text-autospace:none">
<span style="font-family:&quot;Courier New&quot;;color:blue">
<font size="3">else</font></span></p>
<p class="MsoNormal" style="margin:0; text-autospace:none">
<span style="font-family:&quot;Courier New&quot;;color:blue">
<font size="3">printf("UDP server - bind() is OK\n");</font></span></p>
<p class="MsoNormal" style="margin:0; text-autospace:none">&nbsp;</p>
<p class="MsoNormal" style="margin:0; text-autospace:none">
<span style="font-family:&quot;Courier New&quot;;color:blue">
<font size="3">printf("Using IP %s and port %d\n", inet_ntoa(serveraddr.sin_addr), 
SERVPORT);</font></span></p>
<p class="MsoNormal" style="margin:0; text-autospace:none">
<span style="font-family:&quot;Courier New&quot;;color:blue">
<font size="3">printf("UDP server - Listening...\n");</font></span></p>
<p class="MsoNormal" style="margin:0; text-autospace:none">&nbsp;</p>
<p class="MsoNormal" style="margin:0; text-autospace:none">
<span style="font-family:&quot;Courier New&quot;;color:#008000">
<font size="3">/* Use the recvfrom() function to receive the */</font></span></p>
<p class="MsoNormal" style="margin:0; text-autospace:none">
<span style="font-family:&quot;Courier New&quot;;color:#008000">
<font size="3">/* data. The recvfrom() function waits */</font></span></p>
<p class="MsoNormal" style="margin:0; text-autospace:none">
<span style="font-family:&quot;Courier New&quot;;color:#008000">
<font size="3">/* indefinitely for data to arrive. */</font></span></p>
<p class="MsoNormal" style="margin:0; text-autospace:none">
<span style="font-family:&quot;Courier New&quot;;color:#008000">
<font size="3">/************************************************/</font></span></p>
<p class="MsoNormal" style="margin:0; text-autospace:none">
<span style="font-family:&quot;Courier New&quot;;color:#008000">
<font size="3">/* This example does not use flags that control */</font></span></p>
<p class="MsoNormal" style="margin:0; text-autospace:none">
<span style="font-family:&quot;Courier New&quot;;color:#008000">
<font size="3">/* the reception of the data. */</font></span></p>
<p class="MsoNormal" style="margin:0; text-autospace:none">
<span style="font-family:&quot;Courier New&quot;;color:#008000">
<font size="3">/************************************************/</font></span></p>
<p class="MsoNormal" style="margin:0; text-autospace:none">
<span style="font-family:&quot;Courier New&quot;;color:#008000">
<font size="3">/* Wait on client requests. */</font></span></p>
<p class="MsoNormal" style="margin:0; text-autospace:none">
<span style="font-family:&quot;Courier New&quot;;color:blue">
<font size="3">rc = recvfrom(sd, bufptr, buflen, 0, (struct sockaddr *)&amp;clientaddr, 
&amp;clientaddrlen);</font></span></p>
<p class="MsoNormal" style="margin:0; text-autospace:none">
<span style="font-family:&quot;Courier New&quot;;color:blue">
<font size="3">if(rc &lt; 0)</font></span></p>
<p class="MsoNormal" style="margin:0; text-autospace:none">
<span style="font-family:&quot;Courier New&quot;;color:blue">
<font size="3">{</font></span></p>
<p class="MsoNormal" style="margin:0; text-autospace:none">
<span style="font-family:&quot;Courier New&quot;;color:blue">
<font size="3">perror("UDP Server - recvfrom() error");</font></span></p>
<p class="MsoNormal" style="margin:0; text-autospace:none">
<span style="font-family:&quot;Courier New&quot;;color:blue">
<font size="3">close(sd);</font></span></p>
<p class="MsoNormal" style="margin:0; text-autospace:none">
<span style="font-family:&quot;Courier New&quot;;color:blue">
<font size="3">exit(-1);</font></span></p>
<p class="MsoNormal" style="margin:0; text-autospace:none">
<span style="font-family:&quot;Courier New&quot;;color:blue">
<font size="3">}</font></span></p>
<p class="MsoNormal" style="margin:0; text-autospace:none">
<span style="font-family:&quot;Courier New&quot;;color:blue">
<font size="3">else</font></span></p>
<p class="MsoNormal" style="margin:0; text-autospace:none">
<span style="font-family:&quot;Courier New&quot;;color:blue">
<font size="3">printf("UDP Server - recvfrom() is OK...\n");</font></span></p>
<p class="MsoNormal" style="margin:0; text-autospace:none">&nbsp;</p>
<p class="MsoNormal" style="margin:0; text-autospace:none">
<span style="font-family:&quot;Courier New&quot;;color:blue">
<font size="3">printf("UDP Server received the following:\n \"%s\" message\n", 
bufptr);</font></span></p>
<p class="MsoNormal" style="margin:0; text-autospace:none">
<span style="font-family:&quot;Courier New&quot;;color:blue">
<font size="3">printf("from port %d and address %s.\n", ntohs(clientaddr.sin_port),</font></span></p>
<p class="MsoNormal" style="margin:0; text-autospace:none">
<span style="font-family:&quot;Courier New&quot;;color:blue">
<font size="3">inet_ntoa(clientaddr.sin_addr));</font></span></p>
<p class="MsoNormal" style="margin:0; text-autospace:none">&nbsp;</p>
<p class="MsoNormal" style="margin:0; text-autospace:none">
<span style="font-family:&quot;Courier New&quot;;color:#008000">
<font size="3">/* Send a reply by using the sendto() function. */</font></span></p>
<p class="MsoNormal" style="margin:0; text-autospace:none">
<span style="font-family:&quot;Courier New&quot;;color:#008000">
<font size="3">/* In this example, the system echoes the received */</font></span></p>
<p class="MsoNormal" style="margin:0; text-autospace:none">
<span style="font-family:&quot;Courier New&quot;;color:#008000">
<font size="3">/* data back to the client. */</font></span></p>
<p class="MsoNormal" style="margin:0; text-autospace:none">
<span style="font-family:&quot;Courier New&quot;;color:#008000">
<font size="3">/************************************************/</font></span></p>
<p class="MsoNormal" style="margin:0; text-autospace:none">
<span style="font-family:&quot;Courier New&quot;;color:#008000">
<font size="3">/* This example does not use flags that control */</font></span></p>
<p class="MsoNormal" style="margin:0; text-autospace:none">
<span style="font-family:&quot;Courier New&quot;;color:#008000">
<font size="3">/* the transmission of the data */</font></span></p>
<p class="MsoNormal" style="margin:0; text-autospace:none">
<span style="font-family:&quot;Courier New&quot;;color:#008000">
<font size="3">/************************************************/</font></span></p>
<p class="MsoNormal" style="margin:0; text-autospace:none">
<span style="font-family:&quot;Courier New&quot;;color:#008000">
<font size="3">/* Send a reply, just echo the request */</font></span></p>
<p class="MsoNormal" style="margin:0; text-autospace:none">
<span style="font-family:&quot;Courier New&quot;;color:blue">
<font size="3">printf("UDP Server replying to the stupid UDP client...\n");</font></span></p>
<p class="MsoNormal" style="margin:0; text-autospace:none">
<span style="font-family:&quot;Courier New&quot;;color:blue">
<font size="3">rc = sendto(sd, bufptr, buflen, 0, (struct sockaddr *)&amp;clientaddr, 
clientaddrlen);</font></span></p>
<p class="MsoNormal" style="margin:0; text-autospace:none">
<span style="font-family:&quot;Courier New&quot;;color:blue">
<font size="3">if(rc &lt; 0)</font></span></p>
<p class="MsoNormal" style="margin:0; text-autospace:none">
<span style="font-family:&quot;Courier New&quot;;color:blue">
<font size="3">{</font></span></p>
<p class="MsoNormal" style="margin:0; text-autospace:none">
<span style="font-family:&quot;Courier New&quot;;color:blue" lang="DA">
<font size="3">perror("UDP server - sendto() error");</font></span></p>
<p class="MsoNormal" style="margin:0; text-autospace:none">
<span style="font-family:&quot;Courier New&quot;;color:blue">
<font size="3">close(sd);</font></span></p>
<p class="MsoNormal" style="margin:0; text-autospace:none">
<span style="font-family:&quot;Courier New&quot;;color:blue">
<font size="3">exit(-1);</font></span></p>
<p class="MsoNormal" style="margin:0; text-autospace:none">
<span style="font-family:&quot;Courier New&quot;;color:blue">
<font size="3">}</font></span></p>
<p class="MsoNormal" style="margin:0; text-autospace:none">
<span style="font-family:&quot;Courier New&quot;;color:blue">
<font size="3">else</font></span></p>
<p class="MsoNormal" style="margin:0; text-autospace:none">
<span style="font-family:&quot;Courier New&quot;;color:blue">
<font size="3">printf("UDP Server - sendto() is OK...\n");</font></span></p>
<p class="MsoNormal" style="margin:0; text-autospace:none">&nbsp;</p>
<p class="MsoNormal" style="margin:0; text-autospace:none">
<span style="font-family:&quot;Courier New&quot;;color:#008000">
<font size="3">/* When the data has been sent, close() the */</font></span></p>
<p class="MsoNormal" style="margin:0; text-autospace:none">
<span style="font-family:&quot;Courier New&quot;;color:#008000">
<font size="3">/* socket descriptor. */</font></span></p>
<p class="MsoNormal" style="margin:0; text-autospace:none">
<span style="font-family:&quot;Courier New&quot;;color:#008000">
<font size="3">/********************************************/</font></span></p>
<p class="MsoNormal" style="margin:0; text-autospace:none">
<span style="font-family:&quot;Courier New&quot;;color:#008000">
<font size="3">/* close() the socket descriptor. */</font></span></p>
<p class="MsoNormal" style="margin:0; text-autospace:none">
<span style="font-family:&quot;Courier New&quot;;color:blue">
<font size="3">close(sd);</font></span></p>
<p class="MsoNormal" style="margin:0; text-autospace:none">
<span style="font-family:&quot;Courier New&quot;;color:blue">
<font size="3">exit(0);</font></span></p>
<p class="MsoNormal" style="margin:0; text-autospace:none">
<span style="font-family:&quot;Courier New&quot;;color:blue">
<font size="3">}</font></span></p>
</blockquote>
<ul type="square">
<li>
<p style="margin-top: 0; margin-bottom: 0"><font face="Arial">Compile and 
link the udp server program.</font></p>
</li>
</ul>
<blockquote>
<p class="MsoNormal" style="margin:0; text-autospace:none">
<span style="font-family:&quot;Courier New&quot;"><font size="3">[bodo@bakawali 
testsocket]$ <font color="#FF0000">gcc -g udpserver.c -o udpserver</font></font></span></p>
</blockquote>
<ul type="square">
<li>
<p style="text-autospace:
none; margin-top:0; margin-bottom:0"><font face="Arial">Run the program and let 
it run in the background.</font></p>
</li>
</ul>
<blockquote>
<p class="MsoNormal" style="margin:0; text-autospace:none">
<span style="font-family:&quot;Courier New&quot;"><font size="3">[bodo@bakawali 
testsocket]$ <font color="#FF0000">./udpserver</font></font></span></p>
<p class="MsoNormal" style="margin:0; text-autospace:none">
<span style="font-family:&quot;Courier New&quot;;color:#993300">
<font size="3">UDP server - socket() is OK</font></span></p>
<p class="MsoNormal" style="margin:0; text-autospace:none">
<span style="font-family:&quot;Courier New&quot;;color:#993300">
<font size="3">UDP server - try to bind...</font></span></p>
<p class="MsoNormal" style="margin:0; text-autospace:none">
<span style="font-family:&quot;Courier New&quot;;color:#993300">
<font size="3">UDP server - bind() is OK</font></span></p>
<p class="MsoNormal" style="margin:0; text-autospace:none">
<span style="font-family:&quot;Courier New&quot;;color:#993300">
<font size="3">Using IP 0.0.0.0 and port 3333</font></span></p>
<p class="MsoNormal" style="margin:0; text-autospace:none">
<span style="font-family:&quot;Courier New&quot;;color:#993300">
<font size="3">UDP server - Listening...</font></span></p>
<p class="MsoNormal" style="margin:0; text-autospace:none">&nbsp;</p>
<p class="MsoNormal" style="margin:0; text-autospace:none">
<span style="font-family:&quot;Courier New&quot;;color:#993300">
<font size="3">[1]+&nbsp; Stopped&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
./udpserver</font></span></p>
<p class="MsoNormal" style="margin:0; text-autospace:none">
<span style="font-family:&quot;Courier New&quot;"><font size="3">[bodo@bakawali 
testsocket]$ <font color="#FF0000">bg</font></font></span></p>
<p class="MsoNormal" style="margin:0; text-autospace:none">
<span style="font-family:&quot;Courier New&quot;;color:#993300">
<font size="3">[1]+ ./udpserver &amp;</font></span></p>
<p class="MsoNormal" style="margin:0; text-autospace:none">
<span style="font-family:&quot;Courier New&quot;"><font size="3">[bodo@bakawali 
testsocket]$</font></span></p>
</blockquote>
<ul type="square">
<li>
<p style="text-autospace:
none; margin-top:0; margin-bottom:0"><font face="Arial">Verify the program running.</font></p>
</li>
</ul>
<blockquote>
<p class="MsoNormal" style="margin:0; text-autospace:none">
<span style="font-family:&quot;Courier New&quot;"><font size="3">[bodo@bakawali 
testsocket]$ <font color="#FF0000">ps aux | grep udpserver</font></font></span></p>
<p class="MsoNormal" style="margin:0; text-autospace:none">
<span style="font-family:&quot;Courier New&quot;;color:#993300">
<font size="3">bodo&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 7963&nbsp; 0.0&nbsp; 0.2&nbsp; 
2240&nbsp; 324 pts/2&nbsp;&nbsp;&nbsp; S&nbsp;&nbsp;&nbsp; 12:22&nbsp;&nbsp; 
0:00 ./udpserver</font></span></p>
<p class="MsoNormal" style="margin:0; text-autospace:none">
<span style="font-family:&quot;Courier New&quot;;color:#993300">
<font size="3">bodo&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 7965&nbsp; 0.0&nbsp; 0.5&nbsp; 
4324&nbsp; 648 pts/2&nbsp;&nbsp;&nbsp; S+&nbsp;&nbsp; 12:24&nbsp;&nbsp; 
0:00 grep udpserver</font></span></p>
</blockquote>
<ul type="square">
<li>
<p style="text-autospace:
none; margin-top:0; margin-bottom:0"><font face="Arial">Verify that the udp server 
is listening at port 3333 waiting for the client connection.</font></p>
</li>
</ul>
<blockquote>
<p class="MsoNormal" style="margin:0; ">
<span style="font-family:&quot;Courier New&quot;"><font size="3">[bodo@bakawali 
testsocket]$ <font color="#FF0000">netstat -a | grep 3333</font></font></span></p>
<p class="MsoNormal" style="margin:0; ">
<span style="font-family:&quot;Courier New&quot;;color:#993300">
<font size="3">udp&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
0 
*:3333&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
 
*:*</font></span></p>
<p class="MsoNormal" style="margin:0; ">
<span style="font-family:&quot;Courier New&quot;"><font size="3">[bodo@bakawali 
testsocket]$</font></span></p>
</blockquote>
<ul type="square">
<li>
<p style="margin-top: 0; margin-bottom: 0"><font face="Arial">Without the 
client program (next example) you can try telneting the server using port 
3333 for testing.&nbsp; For this program example the following telnet session 
cannot be established for UDP/connectionless.</font></p>
</li>
</ul>
<blockquote>
<p class="MsoNormal" style="margin:0; ">
<span style="font-family:&quot;Courier New&quot;"><font size="3">[bodo@bakawali 
testsocket]$ <font color="#FF0000">telnet 203.106.93.94 3333</font></font></span></p>
<p class="MsoNormal" style="margin:0; ">
<span style="font-family:&quot;Courier New&quot;;color:#993300">
<font size="3">Trying 203.106.93.94...</font></span></p>
<p class="MsoNormal" style="margin:0; ">
<span style="font-family:&quot;Courier New&quot;;color:#993300">
<font size="3">telnet: connect to address 203.106.93.94: Connection refused</font></span></p>
<p class="MsoNormal" style="margin:0; ">
<span style="font-family:&quot;Courier New&quot;;color:#993300">
<font size="3">telnet: Unable to connect to remote host: Connection refused</font></span></p>
</blockquote>
<p class="MsoNormal" style="margin-top: 0; margin-bottom: 0">&nbsp;</p>
<p class="MsoNormal" style="margin-top: 0; margin-bottom: 0">&nbsp;</p>
<p class="MsoNormal" style="margin-top: 0; margin-bottom: 0">&nbsp;</p>
<p class="MsoNormal" style="margin-top: 0; margin-bottom: 0">&nbsp;</p>
<p class="MsoNormal" style="margin-top: 0; margin-bottom: 0">&nbsp;</p>
<p class="MsoNormal" style="margin-top: 0; margin-bottom: 0">&nbsp;</p>
<p class="MsoNormal" style="margin-top: 0; margin-bottom: 0">&nbsp;</p>
<p class="MsoNormal" style="margin-top: 0; margin-bottom: 0" align="center"><script type="text/javascript"><!--
google_ad_client = "pub-8089415323104206";
/* 728x90, created 6/1/08lsoc */
google_ad_slot = "6715836755";
google_ad_width = 728;
google_ad_height = 90;
//-->
</script>
&nbsp;<script type="text/javascript" src="The%20Linux%20socket%20and%20network%20TCP%20client-server%20C%20program%20example_files/show_ads.js">
</script><ins style="display:inline-table;border:none;height:90px;margin:0;padding:0;position:relative;visibility:visible;width:728px;background-color:transparent"><ins id="aswift_2_anchor" style="display:block;border:none;height:90px;margin:0;padding:0;position:relative;visibility:visible;width:728px;background-color:transparent"><iframe marginwidth="0" marginheight="0" vspace="0" hspace="0" allowtransparency="true" onload="var i=this.id,s=window.google_iframe_oncopy,H=s&amp;&amp;s.handlers,h=H&amp;&amp;H[i],w=this.contentWindow,d;try{d=w.document}catch(e){}if(h&amp;&amp;d&amp;&amp;(!d.body||!d.body.firstChild)){if(h.call){setTimeout(h,0)}else if(h.match){try{h=s.upd(h,i)}catch(e){}w.location.replace(h)}}" id="aswift_2" name="aswift_2" style="left:0;position:absolute;top:0;" width="728" frameborder="0" height="90" scrolling="no"></iframe></ins></ins></p>
<p class="MsoNormal" style="margin-top: 0; margin-bottom: 0">&nbsp;</p>
<p class="MsoNormal" style="margin-top: 0; margin-bottom: 0">&nbsp;</p>
<p class="MsoNormal" style="margin-top: 0; margin-bottom: 0">&nbsp;</p>
<p class="MsoNormal" style="margin-top: 0; margin-bottom: 0">&nbsp;</p>
<p class="MsoNormal" style="margin-top: 0; margin-bottom: 0">&nbsp;</p>
<p class="MsoNormal" style="margin-top: 0; margin-bottom: 0">&nbsp;</p>
<p class="MsoNormal" style="margin-top: 0; margin-bottom: 0">&nbsp;</p>
<p class="MsoNormal" style="text-autospace:none; margin-top:0; margin-bottom:0">
<b><span style="font-family:Arial"><font size="3">Example: Connecting a UDP 
client to a server, a client program</font></span></b></p>
<ul type="square">
<li>
<p style="text-autospace:
none; margin-top:0; margin-bottom:0"><font face="Arial">The following example shows 
how to use UDP to connect a connectionless client socket program to a server.&nbsp; 
This program will be used to connect to the previous UDP server.</font></p>
</li>
</ul>
<blockquote>
<p class="MsoNormal" style="margin:0; text-autospace:none">
<span style="font-family:&quot;Courier New&quot;;color:#008000">
<font size="3">/****************udpclient.c********************/</font></span></p>
<p class="MsoNormal" style="margin:0; text-autospace:none">
<span style="font-family:&quot;Courier New&quot;;color:#008000">
<font size="3">/* Header files needed to use the sockets API. */</font></span></p>
<p class="MsoNormal" style="margin:0; text-autospace:none">
<span style="font-family:&quot;Courier New&quot;;color:#008000">
<font size="3">/* File contain Macro, Data Type and Structure */</font></span></p>
<p class="MsoNormal" style="margin:0; text-autospace:none">
<span style="font-family:&quot;Courier New&quot;;color:#008000">
<font size="3">/* definitions along with Function prototypes. */</font></span></p>
<p class="MsoNormal" style="margin:0; text-autospace:none">
<span style="font-family:&quot;Courier New&quot;;color:#008000">
<font size="3">/***********************************************/</font></span></p>
<p class="MsoNormal" style="margin:0; text-autospace:none">
<span style="font-family:&quot;Courier New&quot;;color:blue">
<font size="3">#include &lt;stdio.h&gt;</font></span></p>
<p class="MsoNormal" style="margin:0; text-autospace:none">
<span style="font-family:&quot;Courier New&quot;;color:blue">
<font size="3">#include &lt;stdlib.h&gt;</font></span></p>
<p class="MsoNormal" style="margin:0; text-autospace:none">
<span style="font-family:&quot;Courier New&quot;;color:blue">
<font size="3">#include &lt;string.h&gt;</font></span></p>
<p class="MsoNormal" style="margin:0; text-autospace:none">
<span style="font-family:&quot;Courier New&quot;;color:blue">
<font size="3">#include &lt;sys/types.h&gt;</font></span></p>
<p class="MsoNormal" style="margin:0; text-autospace:none">
<span style="font-family:&quot;Courier New&quot;;color:blue">
<font size="3">#include &lt;sys/socket.h&gt;</font></span></p>
<p class="MsoNormal" style="margin:0; text-autospace:none">
<span style="font-family:&quot;Courier New&quot;;color:blue">
<font size="3">#include &lt;netinet/in.h&gt;</font></span></p>
<p class="MsoNormal" style="margin:0; text-autospace:none">
<span style="font-family:&quot;Courier New&quot;;color:blue">
<font size="3">#include &lt;arpa/inet.h&gt;</font></span></p>
<p class="MsoNormal" style="margin:0; text-autospace:none">
<span style="font-family:&quot;Courier New&quot;;color:blue">
<font size="3">#include &lt;netdb.h&gt;</font></span></p>
<p class="MsoNormal" style="margin:0; text-autospace:none">&nbsp;</p>
<p class="MsoNormal" style="margin:0; text-autospace:none">
<span style="font-family:&quot;Courier New&quot;;color:#008000">
<font size="3">/* Host name of my system, change accordingly */</font></span></p>
<p class="MsoNormal" style="margin:0; text-autospace:none">
<span style="font-family:&quot;Courier New&quot;;color:#008000">
<font size="3">/* Put the server hostname that run the UDP server program 
*/</font></span></p>
<p class="MsoNormal" style="margin:0; text-autospace:none">
<span style="font-family:&quot;Courier New&quot;;color:#008000">
<font size="3">/* This will be used as default UDP server for client connection 
*/</font></span></p>
<p class="MsoNormal" style="margin:0; text-autospace:none">
<span style="font-family:&quot;Courier New&quot;;color:blue">
<font size="3">#define SERVER "bakawali"</font></span></p>
<p class="MsoNormal" style="margin:0; text-autospace:none">
<span style="font-family:&quot;Courier New&quot;;color:#008000">
<font size="3">/* Server's port number */</font></span></p>
<p class="MsoNormal" style="margin:0; text-autospace:none">
<span style="font-family:&quot;Courier New&quot;;color:blue">
<font size="3">#define SERVPORT 3333</font></span></p>
<p class="MsoNormal" style="margin:0; text-autospace:none">
<span style="font-family:&quot;Courier New&quot;;color:#008000">
<font size="3">/* Pass in 1 argument (argv[1]) which is either the */</font></span></p>
<p class="MsoNormal" style="margin:0; text-autospace:none">
<span style="font-family:&quot;Courier New&quot;;color:#008000">
<font size="3">/* address or host name of the server, or */</font></span></p>
<p class="MsoNormal" style="margin:0; text-autospace:none">
<span style="font-family:&quot;Courier New&quot;;color:#008000">
<font size="3">/* set the server name in the #define SERVER above. */</font></span></p>
<p class="MsoNormal" style="margin:0; text-autospace:none">&nbsp;</p>
<p class="MsoNormal" style="margin:0; text-autospace:none">
<span style="font-family:&quot;Courier New&quot;;color:blue">
<font size="3">int main(int argc, char *argv[])</font></span></p>
<p class="MsoNormal" style="margin:0; text-autospace:none">
<span style="font-family:&quot;Courier New&quot;;color:blue">
<font size="3">{</font></span></p>
<p class="MsoNormal" style="margin:0; text-autospace:none">
<span style="font-family:&quot;Courier New&quot;;color:#008000">
<font size="3">/* Variable and structure definitions. */</font></span></p>
<p class="MsoNormal" style="margin:0; text-autospace:none">
<span style="font-family:&quot;Courier New&quot;;color:blue">
<font size="3">int sd, rc;</font></span></p>
<p class="MsoNormal" style="margin:0; text-autospace:none">
<span style="font-family:&quot;Courier New&quot;;color:blue">
<font size="3">struct sockaddr_in serveraddr, clientaddr;</font></span></p>
<p class="MsoNormal" style="margin:0; text-autospace:none">
<span style="font-family:&quot;Courier New&quot;;color:blue">
<font size="3">int serveraddrlen = sizeof(serveraddr);</font></span></p>
<p class="MsoNormal" style="margin:0; text-autospace:none">
<span style="font-family:&quot;Courier New&quot;;color:blue">
<font size="3">char server[255];</font></span></p>
<p class="MsoNormal" style="margin:0; text-autospace:none">
<span style="font-family:&quot;Courier New&quot;;color:blue">
<font size="3">char buffer[100];</font></span></p>
<p class="MsoNormal" style="margin:0; text-autospace:none">
<span style="font-family:&quot;Courier New&quot;;color:blue">
<font size="3">char *bufptr = buffer;</font></span></p>
<p class="MsoNormal" style="margin:0; text-autospace:none">
<span style="font-family:&quot;Courier New&quot;;color:blue">
<font size="3">int buflen = sizeof(buffer);</font></span></p>
<p class="MsoNormal" style="margin:0; text-autospace:none">
<span style="font-family:&quot;Courier New&quot;;color:blue">
<font size="3">struct hostent *hostp;</font></span></p>
<p class="MsoNormal" style="margin:0; text-autospace:none">
<span style="font-family:&quot;Courier New&quot;;color:blue">
<font size="3">memset(buffer, 0x00, sizeof(buffer));</font></span></p>
<p class="MsoNormal" style="margin:0; text-autospace:none">
<span style="font-family:&quot;Courier New&quot;;color:#008000">
<font size="3">/* 36 characters + terminating NULL */</font></span></p>
<p class="MsoNormal" style="margin:0; text-autospace:none">
<span style="font-family:&quot;Courier New&quot;;color:blue">
<font size="3">memcpy(buffer, "Hello! A client request message lol!", 37);</font></span></p>
<p class="MsoNormal" style="margin:0; text-autospace:none">&nbsp;</p>
<p class="MsoNormal" style="margin:0; text-autospace:none">
<span style="font-family:&quot;Courier New&quot;;color:#008000">
<font size="3">/* The socket() function returns a socket */</font></span></p>
<p class="MsoNormal" style="margin:0; text-autospace:none">
<span style="font-family:&quot;Courier New&quot;;color:#008000">
<font size="3">/* descriptor representing an endpoint. */</font></span></p>
<p class="MsoNormal" style="margin:0; text-autospace:none">
<span style="font-family:&quot;Courier New&quot;;color:#008000">
<font size="3">/* The statement also identifies that the */</font></span></p>
<p class="MsoNormal" style="margin:0; text-autospace:none">
<span style="font-family:&quot;Courier New&quot;;color:#008000">
<font size="3">/* INET (Internet Protocol) address family */</font></span></p>
<p class="MsoNormal" style="margin:0; text-autospace:none">
<span style="font-family:&quot;Courier New&quot;;color:#008000">
<font size="3">/* with the UDP transport (SOCK_DGRAM) will */</font></span></p>
<p class="MsoNormal" style="margin:0; text-autospace:none">
<span style="font-family:&quot;Courier New&quot;;color:#008000">
<font size="3">/* be used for this socket. */</font></span></p>
<p class="MsoNormal" style="margin:0; text-autospace:none">
<span style="font-family:&quot;Courier New&quot;;color:#008000">
<font size="3">/******************************************/</font></span></p>
<p class="MsoNormal" style="margin:0; text-autospace:none">
<span style="font-family:&quot;Courier New&quot;;color:#008000">
<font size="3">/* get a socket descriptor */</font></span></p>
<p class="MsoNormal" style="margin:0; text-autospace:none">
<span style="font-family:&quot;Courier New&quot;;color:blue">
<font size="3">if((sd = socket(AF_INET, SOCK_DGRAM, 0)) &lt; 0)</font></span></p>
<p class="MsoNormal" style="margin:0; text-autospace:none">
<span style="font-family:&quot;Courier New&quot;;color:blue">
<font size="3">{</font></span></p>
<p class="MsoNormal" style="margin:0; text-autospace:none">
<span style="font-family:&quot;Courier New&quot;;color:blue">
<font size="3">perror("UDP Client - socket() error");</font></span></p>
<p class="MsoNormal" style="margin:0; text-autospace:none">
<span style="font-family:&quot;Courier New&quot;;color:blue">
<font size="3">/* Just exit lol! */</font></span></p>
<p class="MsoNormal" style="margin:0; text-autospace:none">
<span style="font-family:&quot;Courier New&quot;;color:blue">
<font size="3">exit(-1);</font></span></p>
<p class="MsoNormal" style="margin:0; text-autospace:none">
<span style="font-family:&quot;Courier New&quot;;color:blue">
<font size="3">}</font></span></p>
<p class="MsoNormal" style="margin:0; text-autospace:none">
<span style="font-family:&quot;Courier New&quot;;color:blue">
<font size="3">else</font></span></p>
<p class="MsoNormal" style="margin:0; text-autospace:none">
<span style="font-family:&quot;Courier New&quot;;color:blue">
<font size="3">printf("UDP Client - socket() is OK!\n");</font></span></p>
<p class="MsoNormal" style="margin:0; text-autospace:none">&nbsp;</p>
<p class="MsoNormal" style="margin:0; text-autospace:none">
<span style="font-family:&quot;Courier New&quot;;color:#008000">
<font size="3">/* If the hostname/IP of the server is supplied */</font></span></p>
<p class="MsoNormal" style="margin:0; text-autospace:none">
<span style="font-family:&quot;Courier New&quot;;color:#008000">
<font size="3">/* Or if(argc = 2) */</font></span></p>
<p class="MsoNormal" style="margin:0; text-autospace:none">
<span style="font-family:&quot;Courier New&quot;;color:blue">
<font size="3">if(argc &gt; 1)</font></span></p>
<p class="MsoNormal" style="margin:0; text-autospace:none">
<span style="font-family:&quot;Courier New&quot;;color:blue">
<font size="3">strcpy(server, argv[1]);</font></span></p>
<p class="MsoNormal" style="margin:0; text-autospace:none">
<span style="font-family:&quot;Courier New&quot;;color:blue">
<font size="3">else</font></span></p>
<p class="MsoNormal" style="margin:0; text-autospace:none">
<span style="font-family:&quot;Courier New&quot;;color:blue">
<font size="3">{</font></span></p>
<p class="MsoNormal" style="margin:0; text-autospace:none">
<span style="font-family:&quot;Courier New&quot;;color:#008000">
<font size="3">/*Use default hostname or IP*/</font></span></p>
<p class="MsoNormal" style="margin:0; text-autospace:none">
<span style="font-family:&quot;Courier New&quot;;color:blue">
<font size="3">printf("UDP Client - Usage %s &lt;Server hostname or IP&gt;\n", 
argv[0]);</font></span></p>
<p class="MsoNormal" style="margin:0; text-autospace:none">
<span style="font-family:&quot;Courier New&quot;;color:blue">
<font size="3">printf("UDP Client - Using default hostname/IP!\n");</font></span></p>
<p class="MsoNormal" style="margin:0; text-autospace:none">&nbsp;</p>
<p class="MsoNormal" style="margin:0; text-autospace:none">
<span style="font-family:&quot;Courier New&quot;;color:blue">
<font size="3">strcpy(server, SERVER);</font></span></p>
<p class="MsoNormal" style="margin:0; text-autospace:none">
<span style="font-family:&quot;Courier New&quot;;color:blue">
<font size="3">}</font></span></p>
<p class="MsoNormal" style="margin:0; text-autospace:none">&nbsp;</p>
<p class="MsoNormal" style="margin:0; text-autospace:none">
<span style="font-family:&quot;Courier New&quot;;color:blue">
<font size="3">memset(&amp;serveraddr, 0x00, sizeof(struct sockaddr_in));</font></span></p>
<p class="MsoNormal" style="margin:0; text-autospace:none">
<span style="font-family:&quot;Courier New&quot;;color:blue">
<font size="3">serveraddr.sin_family = AF_INET;</font></span></p>
<p class="MsoNormal" style="margin:0; text-autospace:none">
<span style="font-family:&quot;Courier New&quot;;color:blue">
<font size="3">serveraddr.sin_port = htons(SERVPORT);</font></span></p>
<p class="MsoNormal" style="margin:0; text-autospace:none">&nbsp;</p>
<p class="MsoNormal" style="margin:0; text-autospace:none">
<span style="font-family:&quot;Courier New&quot;;color:blue">
<font size="3">if((serveraddr.sin_addr.s_addr = inet_addr(server)) == (unsigned 
long)INADDR_NONE)</font></span></p>
<p class="MsoNormal" style="margin:0; text-autospace:none">
<span style="font-family:&quot;Courier New&quot;;color:blue">
<font size="3">{</font></span></p>
<p class="MsoNormal" style="margin:0; text-autospace:none">
<span style="font-family:&quot;Courier New&quot;;color:#008000">
<font size="3">/* Use the gethostbyname() function to retrieve */</font></span></p>
<p class="MsoNormal" style="margin:0; text-autospace:none">
<span style="font-family:&quot;Courier New&quot;;color:#008000">
<font size="3">/* the address of the host server if the system */</font></span></p>
<p class="MsoNormal" style="margin:0; text-autospace:none">
<span style="font-family:&quot;Courier New&quot;;color:#008000">
<font size="3">/* passed the host name of the server as a parameter. */</font></span></p>
<p class="MsoNormal" style="margin:0; text-autospace:none">
<span style="font-family:&quot;Courier New&quot;;color:#008000">
<font size="3">/************************************************/</font></span></p>
<p class="MsoNormal" style="margin:0; text-autospace:none">
<span style="font-family:&quot;Courier New&quot;;color:#008000">
<font size="3">/* get server address */</font></span></p>
<p class="MsoNormal" style="margin:0; text-autospace:none">
<span style="font-family:&quot;Courier New&quot;;color:blue">
<font size="3">hostp = gethostbyname(server);</font></span></p>
<p class="MsoNormal" style="margin:0; text-autospace:none">
<span style="font-family:&quot;Courier New&quot;;color:blue">
<font size="3">if(hostp == (struct hostent *)NULL)</font></span></p>
<p class="MsoNormal" style="margin:0; text-autospace:none">
<span style="font-family:&quot;Courier New&quot;;color:blue">
<font size="3">{</font></span></p>
<p class="MsoNormal" style="margin:0; text-autospace:none">
<span style="font-family:&quot;Courier New&quot;;color:blue">
<font size="3">printf("HOST NOT FOUND --&gt; ");</font></span></p>
<p class="MsoNormal" style="margin:0; text-autospace:none">
<span style="font-family:&quot;Courier New&quot;;color:#008000">
<font size="3">/* h_errno is usually defined */</font></span></p>
<p class="MsoNormal" style="margin:0; text-autospace:none">
<span style="font-family:&quot;Courier New&quot;;color:#008000" lang="DE">
<font size="3">/* in netdb.h */</font></span></p>
<p class="MsoNormal" style="margin:0; text-autospace:none">
<span style="font-family:&quot;Courier New&quot;;color:blue" lang="DE">
<font size="3">printf("h_errno = %d\n", h_errno);</font></span></p>
<p class="MsoNormal" style="margin:0; text-autospace:none">
<span style="font-family:&quot;Courier New&quot;;color:blue">
<font size="3">exit(-1);</font></span></p>
<p class="MsoNormal" style="margin:0; text-autospace:none">
<span style="font-family:&quot;Courier New&quot;;color:blue">
<font size="3">}</font></span></p>
<p class="MsoNormal" style="margin:0; text-autospace:none">
<span style="font-family:&quot;Courier New&quot;;color:blue">
<font size="3">else</font></span></p>
<p class="MsoNormal" style="margin:0; text-autospace:none">
<span style="font-family:&quot;Courier New&quot;;color:blue">
<font size="3">{</font></span></p>
<p class="MsoNormal" style="margin:0; text-autospace:none">
<span style="font-family:&quot;Courier New&quot;;color:blue">
<font size="3">printf("UDP Client - gethostname() of the server is OK... 
\n");</font></span></p>
<p class="MsoNormal" style="margin:0; text-autospace:none">
<span style="font-family:&quot;Courier New&quot;;color:blue">
<font size="3">printf("Connected to UDP server %s on port %d.\n", server, 
SERVPORT);</font></span></p>
<p class="MsoNormal" style="margin:0; text-autospace:none">
<span style="font-family:&quot;Courier New&quot;;color:blue">
<font size="3">}</font></span></p>
<p class="MsoNormal" style="margin:0; text-autospace:none">
<span style="font-family:&quot;Courier New&quot;;color:blue">
<font size="3">memcpy(&amp;serveraddr.sin_addr, hostp-&gt;h_addr, sizeof(serveraddr.sin_addr));</font></span></p>
<p class="MsoNormal" style="margin:0; text-autospace:none">
<span style="font-family:&quot;Courier New&quot;;color:blue">
<font size="3">}</font></span></p>
<p class="MsoNormal" style="margin:0; text-autospace:none">&nbsp;</p>
<p class="MsoNormal" style="margin:0; text-autospace:none">
<span style="font-family:&quot;Courier New&quot;;color:#008000">
<font size="3">/* Use the sendto() function to send the data */</font></span></p>
<p class="MsoNormal" style="margin:0; text-autospace:none">
<span style="font-family:&quot;Courier New&quot;;color:#008000">
<font size="3">/* to the server. */</font></span></p>
<p class="MsoNormal" style="margin:0; text-autospace:none">
<span style="font-family:&quot;Courier New&quot;;color:#008000">
<font size="3">/************************************************/</font></span></p>
<p class="MsoNormal" style="margin:0; text-autospace:none">
<span style="font-family:&quot;Courier New&quot;;color:#008000">
<font size="3">/* This example does not use flags that control */</font></span></p>
<p class="MsoNormal" style="margin:0; text-autospace:none">
<span style="font-family:&quot;Courier New&quot;;color:#008000">
<font size="3">/* the transmission of the data. */</font></span></p>
<p class="MsoNormal" style="margin:0; text-autospace:none">
<span style="font-family:&quot;Courier New&quot;;color:#008000">
<font size="3">/************************************************/</font></span></p>
<p class="MsoNormal" style="margin:0; text-autospace:none">
<span style="font-family:&quot;Courier New&quot;;color:#008000">
<font size="3">/* send request to server */</font></span></p>
<p class="MsoNormal" style="margin:0; text-autospace:none">
<span style="font-family:&quot;Courier New&quot;;color:blue">
<font size="3">rc = sendto(sd, bufptr, buflen, 0, (struct sockaddr *)&amp;serveraddr, 
sizeof(serveraddr));</font></span></p>
<p class="MsoNormal" style="margin:0; text-autospace:none">
<span style="font-family:&quot;Courier New&quot;;color:blue">
<font size="3">if(rc &lt; 0)</font></span></p>
<p class="MsoNormal" style="margin:0; text-autospace:none">
<span style="font-family:&quot;Courier New&quot;;color:blue">
<font size="3">{</font></span></p>
<p class="MsoNormal" style="margin:0; text-autospace:none">
<span style="font-family:&quot;Courier New&quot;;color:blue">
<font size="3">perror("UDP Client - sendto() error");</font></span></p>
<p class="MsoNormal" style="margin:0; text-autospace:none">
<span style="font-family:&quot;Courier New&quot;;color:blue">
<font size="3">close(sd);</font></span></p>
<p class="MsoNormal" style="margin:0; text-autospace:none">
<span style="font-family:&quot;Courier New&quot;;color:blue">
<font size="3">exit(-1);</font></span></p>
<p class="MsoNormal" style="margin:0; text-autospace:none">
<span style="font-family:&quot;Courier New&quot;;color:blue">
<font size="3">}</font></span></p>
<p class="MsoNormal" style="margin:0; text-autospace:none">
<span style="font-family:&quot;Courier New&quot;;color:blue">
<font size="3">else</font></span></p>
<p class="MsoNormal" style="margin:0; text-autospace:none">
<span style="font-family:&quot;Courier New&quot;;color:blue">
<font size="3">printf("UDP Client - sendto() is OK!\n");</font></span></p>
<p class="MsoNormal" style="margin:0; text-autospace:none">&nbsp;</p>
<p class="MsoNormal" style="margin:0; text-autospace:none">
<span style="font-family:&quot;Courier New&quot;;color:blue">
<font size="3">printf("Waiting a reply from UDP server...\n");</font></span></p>
<p class="MsoNormal" style="margin:0; text-autospace:none">&nbsp;</p>
<p class="MsoNormal" style="margin:0; text-autospace:none">
<span style="font-family:&quot;Courier New&quot;;color:#008000">
<font size="3">/* Use the recvfrom() function to receive the */</font></span></p>
<p class="MsoNormal" style="margin:0; text-autospace:none">
<span style="font-family:&quot;Courier New&quot;;color:#008000">
<font size="3">/* data back from the server. */</font></span></p>
<p class="MsoNormal" style="margin:0; text-autospace:none">
<span style="font-family:&quot;Courier New&quot;;color:#008000">
<font size="3">/************************************************/</font></span></p>
<p class="MsoNormal" style="margin:0; text-autospace:none">
<span style="font-family:&quot;Courier New&quot;;color:#008000">
<font size="3">/* This example does not use flags that control */</font></span></p>
<p class="MsoNormal" style="margin:0; text-autospace:none">
<span style="font-family:&quot;Courier New&quot;;color:#008000">
<font size="3">/* the reception of the data. */</font></span></p>
<p class="MsoNormal" style="margin:0; text-autospace:none">
<span style="font-family:&quot;Courier New&quot;;color:#008000">
<font size="3">/************************************************/</font></span></p>
<p class="MsoNormal" style="margin:0; text-autospace:none">
<span style="font-family:&quot;Courier New&quot;;color:#008000">
<font size="3">/* Read server reply. */</font></span></p>
<p class="MsoNormal" style="margin:0; text-autospace:none">
<span style="font-family:&quot;Courier New&quot;;color:#008000">
<font size="3">/* Note: serveraddr is reset on the recvfrom() function. 
*/</font></span></p>
<p class="MsoNormal" style="margin:0; text-autospace:none">
<span style="font-family:&quot;Courier New&quot;;color:blue">
<font size="3">rc = recvfrom(sd, bufptr, buflen, 0, (struct sockaddr *)&amp;serveraddr, 
&amp;serveraddrlen);</font></span></p>
<p class="MsoNormal" style="margin:0; text-autospace:none">&nbsp;</p>
<p class="MsoNormal" style="margin:0; text-autospace:none">
<span style="font-family:&quot;Courier New&quot;;color:blue">
<font size="3">if(rc &lt; 0)</font></span></p>
<p class="MsoNormal" style="margin:0; text-autospace:none">
<span style="font-family:&quot;Courier New&quot;;color:blue">
<font size="3">{</font></span></p>
<p class="MsoNormal" style="margin:0; text-autospace:none">
<span style="font-family:&quot;Courier New&quot;;color:blue">
<font size="3">perror("UDP Client - recvfrom() error");</font></span></p>
<p class="MsoNormal" style="margin:0; text-autospace:none">
<span style="font-family:&quot;Courier New&quot;;color:blue">
<font size="3">close(sd);</font></span></p>
<p class="MsoNormal" style="margin:0; text-autospace:none">
<span style="font-family:&quot;Courier New&quot;;color:blue">
<font size="3">exit(-1);</font></span></p>
<p class="MsoNormal" style="margin:0; text-autospace:none">
<span style="font-family:&quot;Courier New&quot;;color:blue">
<font size="3">}</font></span></p>
<p class="MsoNormal" style="margin:0; text-autospace:none">
<span style="font-family:&quot;Courier New&quot;;color:blue">
<font size="3">else</font></span></p>
<p class="MsoNormal" style="margin:0; text-autospace:none">
<span style="font-family:&quot;Courier New&quot;;color:blue">
<font size="3">{</font></span></p>
<p class="MsoNormal" style="margin:0; text-autospace:none">
<span style="font-family:&quot;Courier New&quot;;color:blue">
<font size="3">printf("UDP client received the following: \"%s\" message\n", 
bufptr);</font></span></p>
<p class="MsoNormal" style="margin:0; text-autospace:none">
<span style="font-family:&quot;Courier New&quot;;color:blue">
<font size="3">printf(" from port %d, address %s\n", ntohs(serveraddr.sin_port), 
inet_ntoa(serveraddr.sin_addr));</font></span></p>
<p class="MsoNormal" style="margin:0; text-autospace:none">
<span style="font-family:&quot;Courier New&quot;;color:blue">
<font size="3">}</font></span></p>
<p class="MsoNormal" style="margin:0; text-autospace:none">&nbsp;</p>
<p class="MsoNormal" style="margin:0; text-autospace:none">
<span style="font-family:&quot;Courier New&quot;;color:#008000">
<font size="3">/* When the data has been received, close() */</font></span></p>
<p class="MsoNormal" style="margin:0; text-autospace:none">
<span style="font-family:&quot;Courier New&quot;;color:#008000">
<font size="3">/* the socket descriptor. */</font></span></p>
<p class="MsoNormal" style="margin:0; text-autospace:none">
<span style="font-family:&quot;Courier New&quot;;color:#008000">
<font size="3">/********************************************/</font></span></p>
<p class="MsoNormal" style="margin:0; text-autospace:none">
<span style="font-family:&quot;Courier New&quot;;color:#008000">
<font size="3">/* close() the socket descriptor. */</font></span></p>
<p class="MsoNormal" style="margin:0; text-autospace:none">
<span style="font-family:&quot;Courier New&quot;;color:blue">
<font size="3">close(sd);</font></span></p>
<p class="MsoNormal" style="margin:0; text-autospace:none">
<span style="font-family:&quot;Courier New&quot;;color:blue">
<font size="3">exit(0);</font></span></p>
<p class="MsoNormal" style="margin:0; text-autospace:none">
<span style="font-family:&quot;Courier New&quot;;color:blue">
<font size="3">}</font></span></p>
</blockquote>
<ul type="square">
<li>
<p style="text-autospace:
none; margin-top:0; margin-bottom:0"><font face="Arial">Compile and link the program.</font></p>
</li>
</ul>
<blockquote>
<p class="MsoNormal" style="margin:0; text-autospace:none">
<span style="font-family:&quot;Courier New&quot;"><font size="3">[bodo@bakawali 
testsocket]$ <font color="#FF0000">gcc -g udpclient.c -o udpclient</font></font></span></p>
</blockquote>
<ul type="square">
<li>
<p style="text-autospace:
none; margin-top:0; margin-bottom:0"><font face="Arial">Run the program.&nbsp; Before 
that make sure the previous program example (the UDP server) is running.</font></p>
</li>
</ul>
<blockquote>
<p class="MsoNormal" style="margin:0; text-autospace:none">
<span style="font-family:&quot;Courier New&quot;"><font size="3">[bodo@bakawali 
testsocket]$<span style="color:#993300"> </span><font color="#FF0000">./udpclient</font></font></span></p>
<p class="MsoNormal" style="margin:0; text-autospace:none">
<span style="font-family:&quot;Courier New&quot;;color:#993300">
<font size="3">UDP Client - socket() is OK!</font></span></p>
<p class="MsoNormal" style="margin:0; text-autospace:none">
<span style="font-family:&quot;Courier New&quot;;color:#993300">
<font size="3">UDP Client - Usage ./udpclient &lt;Server hostname or IP&gt;</font></span></p>
<p class="MsoNormal" style="margin:0; text-autospace:none">
<span style="font-family:&quot;Courier New&quot;;color:#993300">
<font size="3">UDP Client - Using default hostname/IP!</font></span></p>
<p class="MsoNormal" style="margin:0; text-autospace:none">
<span style="font-family:&quot;Courier New&quot;;color:#993300">
<font size="3">UDP Client - gethostname() of the server is OK...</font></span></p>
<p class="MsoNormal" style="margin:0; text-autospace:none">
<span style="font-family:&quot;Courier New&quot;;color:#993300">
<font size="3">Connected to UDP server bakawali on port 3333.</font></span></p>
<p class="MsoNormal" style="margin:0; text-autospace:none">
<span style="font-family:&quot;Courier New&quot;;color:#993300">
<font size="3">UDP Client - sendto() is OK!</font></span></p>
<p class="MsoNormal" style="margin:0; text-autospace:none">
<span style="font-family:&quot;Courier New&quot;;color:#993300">
<font size="3">Waiting a reply from UDP server...</font></span></p>
<p class="MsoNormal" style="margin:0; text-autospace:none">
<span style="font-family:&quot;Courier New&quot;;color:#993300">
<font size="3">UDP client received the following: "Hello! A client request 
message lol!" message</font></span></p>
<p class="MsoNormal" style="margin:0; text-autospace:none">
<span style="font-family:&quot;Courier New&quot;;color:#993300">
<font size="3">&nbsp;from port 3333, address 203.106.93.94</font></span></p>
<p class="MsoNormal" style="margin:0; text-autospace:none">
<span style="font-family:&quot;Courier New&quot;"><font size="3">[bodo@bakawali 
testsocket]$</font></span></p>
</blockquote>
<ul type="square">
<li>
<p style="text-autospace:
none; margin-top:0; margin-bottom:0"><font face="Arial">Well, our udp server and 
client communicated successfully.&nbsp; The following are the expected messages 
at server console.</font></p>
</li>
</ul>
<blockquote>
<p class="MsoNormal" style="margin:0; text-autospace:none">
<span style="font-family:&quot;Courier New&quot;"><font size="3">[bodo@bakawali 
testsocket]$ </font><span style="color:#FF0000"><font size="3">./udpserver</font></span></span></p>
<p class="MsoNormal" style="margin:0; text-autospace:none">
<span style="font-family:&quot;Courier New&quot;;color:#993300">
<font size="3">UDP server - socket() is OK</font></span></p>
<p class="MsoNormal" style="margin:0; text-autospace:none">
<span style="font-family:&quot;Courier New&quot;;color:#993300">
<font size="3">UDP server - try to bind...</font></span></p>
<p class="MsoNormal" style="margin:0; text-autospace:none">
<span style="font-family:&quot;Courier New&quot;;color:#993300">
<font size="3">UDP server - bind() is OK</font></span></p>
<p class="MsoNormal" style="margin:0; text-autospace:none">
<span style="font-family:&quot;Courier New&quot;;color:#993300">
<font size="3">Using IP 0.0.0.0 and port 3333</font></span></p>
<p class="MsoNormal" style="margin:0; text-autospace:none">
<span style="font-family:&quot;Courier New&quot;;color:#993300">
<font size="3">UDP server - Listening...</font></span></p>
<p class="MsoNormal" style="margin:0; text-autospace:none">
<span style="font-family:&quot;Courier New&quot;;color:#993300">
<font size="3">UDP Server - recvfrom() is OK...</font></span></p>
<p class="MsoNormal" style="margin:0; text-autospace:none">
<span style="font-family:&quot;Courier New&quot;;color:#993300">
<font size="3">UDP Server received the following:</font></span></p>
<p class="MsoNormal" style="margin:0; text-autospace:none">
<span style="font-family:&quot;Courier New&quot;;color:#993300">
<font size="3">&nbsp;"Hello! A client request message lol!" message</font></span></p>
<p class="MsoNormal" style="margin:0; text-autospace:none">
<span style="font-family:&quot;Courier New&quot;;color:#993300">
<font size="3">from port 32824 and address 203.106.93.94.</font></span></p>
<p class="MsoNormal" style="margin:0; text-autospace:none">
<span style="font-family:&quot;Courier New&quot;;color:#993300">
<font size="3">UDP Server replying to the stupid UDP client...</font></span></p>
<p class="MsoNormal" style="margin:0; text-autospace:none">
<span style="font-family:&quot;Courier New&quot;;color:#993300">
<font size="3">UDP Server - sendto() is OK...</font></span></p>
<p class="MsoNormal" style="margin:0; text-autospace:none">
<span style="font-family:&quot;Courier New&quot;"><font size="3">[bodo@bakawali 
testsocket]$</font></span></p>
</blockquote>
<p class="MsoNormal" style="margin-top: 0; margin-bottom: 0">
<font size="3" face="Arial"><i><span style="color:red">Continue on next Module…TCP/IP 
and RAW socket, more program examples.</span></i></font></p>
<p class="MsoNormal" style="margin-top: 0; margin-bottom: 0">&nbsp;</p>
<p class="MsoNormal" style="margin-top: 0; margin-bottom: 0">&nbsp;</p>
<p class="MsoNormal" style="margin-top: 0; margin-bottom: 0">&nbsp;</p>
<p class="MsoNormal" style="margin-top: 0; margin-bottom: 0">&nbsp;</p>
<p class="MsoNormal" style="margin-top: 0; margin-bottom: 0">&nbsp;</p>
<p class="MsoNormal" style="margin-top: 0; margin-bottom: 0">&nbsp;</p><center><script src="The%20Linux%20socket%20and%20network%20TCP%20client-server%20C%20program%20example_files/getjs.js"></script><div id="cw_td_5098687" style="height: 0px; width: 0px; display: none;"></div><script type="text/javascript" src="The%20Linux%20socket%20and%20network%20TCP%20client-server%20C%20program%20example_files/GetAd.asc"></script><iframe src="The%20Linux%20socket%20and%20network%20TCP%20client-server%20C%20program%20example_files/cm.html" border="0" marginwidth="0" style="border:none;" width="728" frameborder="0" height="90" scrolling="no"></iframe><div style="display:none;width:0;height:0"><script>var _comscore = _comscore || [];_comscore.push({ c1: "8", c2: "2102", c3: "0", c4: "", c5: "", c15: "", c16: "" });(function() {var s = document.createElement("script"), el = document.getElementsByTagName("script")[0]; s.async = true;s.src = (document.location.protocol == "https:" ? "https://sb" : "http://b") + ".scorecardresearch.com/beacon.js";el.parentNode.insertBefore(s, el);})();</script><noscript><img src="http://b.scorecardresearch.com/p?c1=8&c2=2102&c3=0&c4=&c5=&c6=&c15=&c16=&cv=2.0&cj=1" /></noscript></div><div style="display:none;width:0;height:0"><iframe src="The%20Linux%20socket%20and%20network%20TCP%20client-server%20C%20program%20example_files/p-01-0VIaSjnOLg_002.gif" marginwidth="0" marginheight="0" allowtransparency="true" width="0" frameborder="0" height="0" scrolling="NO"></iframe></div><div style="display:none"><iframe src="The%20Linux%20socket%20and%20network%20TCP%20client-server%20C%20program%20example_files/visitormatch.html"></iframe></div>
</center>
<p class="MsoNormal" style="margin-top: 0; margin-bottom: 0">&nbsp;</p>
<p class="MsoNormal" style="margin-top: 0; margin-bottom: 0">&nbsp;</p>
<p class="MsoNormal" style="margin-top: 0; margin-bottom: 0">&nbsp;</p>
<p class="MsoNormal" style="margin-top: 0; margin-bottom: 0">&nbsp;</p>
<p class="MsoNormal" style="margin-top: 0; margin-bottom: 0">&nbsp;</p>
<p class="MsoNormal" style="text-align:justify; margin-top:0; margin-bottom:0">
<b><span style="font-family:Arial"><font size="3">Further reading and digging:</font></span></b></p>
<p class="MsoNormal" style="margin-top: 0; margin-bottom: 0">&nbsp;</p>
<ol style="margin-top:0mm" start="1" type="1">
<li class="MsoNormal">
<p style="margin-top: 0; margin-bottom: 0"><font size="3" face="Arial">
<a title="C/C++ network open source linux books at Amazon.com" target="_blank" href="http://www.tenouk.com/cplusbook.html">
<span style="text-decoration: none">Check the best selling C/C++, Networking, 
Linux and Open Source books at Amazon.com</span></a>.</font></p>
</li>
<li class="MsoNormal">
<p style="margin-top: 0; margin-bottom: 0"><font size="3" face="Arial">Broadcasting.</font></p>
</li>
<li class="MsoNormal">
<p style="margin-top: 0; margin-bottom: 0"><font size="3" face="Arial">Telephony.</font></p>
</li>
<li class="MsoNormal">
<p style="margin-top: 0; margin-bottom: 0"><font face="Arial">
<a title="The GCC, GDB and other related tools used in this Linux socket programming" target="_blank" href="http://www.tenouk.com/Module000.html">
GCC, GDB and other related tools</a>.</font></p>
</li>
</ol>
<p style="margin-top: 0; margin-bottom: 0">&nbsp;</p>
<p style="margin-top: 0; margin-bottom: 0">&nbsp;</p>
<p style="margin-top: 0; margin-bottom: 0">&nbsp;</p>
<p style="margin-top: 0; margin-bottom: 0">&nbsp;</p>
<p style="margin-top: 0; margin-bottom: 0">&nbsp;</p>
<hr noshade="noshade" color="#FF0000">
<p style="margin: 0" align="center"><script type="text/javascript"><!--
google_ad_client = "pub-8089415323104206";
/* 728x15, created 6/1/08linsoc */
google_ad_slot = "1068795190";
google_ad_width = 728;
google_ad_height = 15;
//-->
</script>
&nbsp;<script type="text/javascript" src="The%20Linux%20socket%20and%20network%20TCP%20client-server%20C%20program%20example_files/show_ads.js">
	
</script><ins style="display:inline-table;border:none;height:15px;margin:0;padding:0;position:relative;visibility:visible;width:728px;background-color:transparent"><ins id="aswift_3_anchor" style="display:block;border:none;height:15px;margin:0;padding:0;position:relative;visibility:visible;width:728px;background-color:transparent"><iframe marginwidth="0" marginheight="0" vspace="0" hspace="0" allowtransparency="true" onload="var i=this.id,s=window.google_iframe_oncopy,H=s&amp;&amp;s.handlers,h=H&amp;&amp;H[i],w=this.contentWindow,d;try{d=w.document}catch(e){}if(h&amp;&amp;d&amp;&amp;(!d.body||!d.body.firstChild)){if(h.call){setTimeout(h,0)}else if(h.match){try{h=s.upd(h,i)}catch(e){}w.location.replace(h)}}" id="aswift_3" name="aswift_3" style="left:0;position:absolute;top:0;" width="728" frameborder="0" height="15" scrolling="no"></iframe></ins></ins></p>
<h1 style="margin-top: 0; margin-bottom: 0" align="center">
<span style="font-weight: 400"><font size="4" face="Verdana">|
<a title="The Windows network programming in .NET using C#, VB .NET and C++/CLI" target="_top" href="http://www.winsocketdotnetworkprogramming.com/">
Winsock &amp; .NET</a> |
<a title="Windows network programming - Windows sockets/Winsock" target="_top" href="http://www.tenouk.com/Winsock/Winsock2story.html">
<span style="text-decoration: none"><font color="#FF0000">Winsock</font></span></a> 
| <span style="text-decoration: none"><font color="#000000">
<a title="More TCP, UDP, Client-Server working program examples" target="_top" href="http://www.tenouk.com/Module41.html">
&lt; More TCP, UDP, Client-Server Examples</a></font></span> 
| <span style="text-decoration: none">
<font color="#800000">
<a title="The Linux socket, TCP/IP, open source programming tutorial using C and GCC" target="_top" href="http://www.tenouk.com/cnlinuxsockettutorials.html">
Linux Socket Index</a></font></span> 
| <span style="text-decoration: none"><font color="#000000">
<a title="Iterative server TCP/IP program example using GNU C language" target="_top" href="http://www.tenouk.com/Module41b.html">
Iterative Server Program Example &gt;</a></font></span> 
|</font></span></h1>
<p style="margin-top: 0; margin-bottom: 0" align="center"><font style="margin-top: 0; margin-bottom: 0" align="center" face="Arial">
<script type="text/javascript" language="javascript">
var sc_project=443642;
var sc_partition=2;
var sc_security="";
var sc_invisible=1;
</script>
<script type="text/javascript" language="javascript" src="The%20Linux%20socket%20and%20network%20TCP%20client-server%20C%20program%20example_files/counter.js"></script>
<noscript><a href="http://www.statcounter.com/" target="_blank">
<img src="http://c3.statcounter.com/counter.php?sc_project=443642&java=0&security=&invisible=1" alt="web page hit counter" border="0" />
</a> </noscript></font></p>
</div>



</body></html>